(this["webpackJsonpvirtual-keypad"]=this["webpackJsonpvirtual-keypad"]||[]).push([[0],{268:function(e,t,n){e.exports=n(585)},583:function(e,t,n){},584:function(e,t,n){},585:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(25),i=n.n(o),u=n(5),s=n(29),l=n(11),d="ACCEPT_PAYMENT",m="ACCEPT_SIGNATURE",p="DISCONNECT",f="IDENTIFY",v="INVOKE_INPUT_OPTION",b="REJECT_PAYMENT",y="REJECT_SIGNATURE",h="RESET",O="SHOW_WELCOME",E="TRANSACTION",j="CLOUD_PAY_DISPLAY",g=Object(l.a)({},j,"Cloud Pay Display"),k=Object.fromEntries(Object.entries(g).map((function(e){return e.reverse()}))),C=/^(Flex|Mini|Mobile)/i,w="SALE",N="VOID",x=n(30),D=n(262),I=n(1),S=n(76),A=[],T={cloverDomain:"",merchantId:"",accessToken:"",friendlyId:"",manualCardEntry:!1,autoConnect:!1,loading:void 0},R=n(13),P=n.n(R),L={connector:null,connected:!1},M=function(e){try{null===e||void 0===e||e.dispose()}catch(t){}},_={list:[],selected:""},V={message:null,stack:null},F={width:0,height:0,strokes:[]},B={active:null,data:{}},Y=n(4),q=n.n(Y),K=n(7),U=n(41),W=function e(t,n){var a=n.retries,r=void 0===a?3:a,c=Object(U.a)(n,["retries"]);return fetch(t,c).catch((function(n){if(r>1)return e(t,Object(I.a)({retries:r-1},c));throw n}))},H=function(e){var t=e.cloverDomain,n=e.merchantId,a=e.deviceId,r=e.accessToken;return W(new URL("/v2/merchant/".concat(n,"/device/").concat(a,"/current_apps?access_token=").concat(r),t).toString(),{method:"GET",headers:{accept:"application/json","content-type":"application/json"}}).then((function(e){return e.json()}))},X=function(e){var t=e.cloverDomain,n=e.merchantId,a=e.accessToken;return W(new URL("/v3/merchants/".concat(n,"/devices?access_token=").concat(a),t).toString(),{method:"GET",headers:{accept:"application/json","content-type":"application/json"}}).then((function(e){return e.json()}))},J=function(e,t){var n=k[t.appName];return n?Object(I.a)(Object(I.a)({},e),{},Object(l.a)({},n,!0)):e},Z=function(e,t){return e.reduce((function(e,n){var a=e[e.length-1];return a.length===t?e.push([n]):a.push(n),e}),[[]])},G=function(){var e=Object(K.a)(q.a.mark((function e(t){var n,a,r,c,o,i,u,s,l;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cloverDomain,a=t.merchantId,r=t.accessToken,e.next=3,X({cloverDomain:n,merchantId:a,accessToken:r});case 3:c=e.sent,o=c.elements,i=o.filter((function(e){return C.test(e.productName)})),u=Z(i,4),s=0;case 8:if(!(s<u.length)){e.next=15;break}return e.next=11,Promise.all(u[s].map((function(e){var t=e.id;return H({cloverDomain:n,merchantId:a,accessToken:r,deviceId:t})})));case 11:u[s]=e.sent;case 12:s++,e.next=8;break;case 15:return l=u.flat(),e.abrupt("return",i.map((function(e,t){return Object(I.a)(Object(I.a)({},e),{},{apps:l[t].applications.reduce(J,{})})})));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=+e;return!isNaN(t)&&t>=0?(t/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):""},$=Object(x.c)({actions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"clearActions":return A;case"appendActions":var r=e.some((function(e){var t,n;return e.type===a.type&&(null===(t=e.payload)||void 0===t?void 0:t.description)===(null===(n=a.payload)||void 0===n?void 0:n.description)}));return r?e:[].concat(Object(S.a)(e),[a]);case"setActions":return a||[];case"setConnector":return[{type:p,payload:{description:"Cancel"}}];case"@@connector/onDeviceReady":case"@@connector/onResetDeviceResponse":return[{type:f},{type:E}];case"@@connector/onDeviceActivityStart":return a.inputOptions.map((function(e){return{type:v,payload:e}}));case"@@connector/onSaleResponse":case"@@connector/onVoidPaymentResponse":return[{type:f},{type:E}];case"@@connector/onConfirmPaymentRequest":return[{type:d,payload:Object(I.a)({description:"Accept"},a)},{type:b,payload:Object(I.a)({description:"Reject"},a)}];case"@@connector/onVerifySignatureRequest":return[{type:m,payload:Object(I.a)({description:"Accept"},a)},{type:y,payload:Object(I.a)({description:"Reject"},a)}];default:return e}},buffer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"clearBuffer":return"";case"appendBuffer":return(e+a).replace(/^0+/,"").slice(0,7);case"setBuffer":return a;case"undoBuffer":return e.length?e.slice(0,e.length-1):"";default:return e}},configuration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"setConfigurationLoading":return Object(I.a)(Object(I.a)({},e),{},{loading:!0});case"setConfigurationNotLoading":return Object(I.a)(Object(I.a)({},e),{},{loading:void 0});case"setConfiguration":return Object(I.a)(Object(I.a)({},e),{},{cloverDomain:a.cloverDomain||"",merchantId:a.merchantId||"",accessToken:a.accessToken||"",friendlyId:a.friendlyId||"",manualCardEntry:a.manualCardEntry||!1,autoConnect:a.autoConnect||!1});default:return e}},connection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"clearConnector":return M(e.connector),L;case"setConnector":return M(e.connector),Object(I.a)(Object(I.a)({},e),{},{connector:a,connected:!1});case"@@connector/onDeviceDisconnected":return Object(I.a)(Object(I.a)({},e),{},{connected:!1});case"@@connector/onDeviceReady":var r=new P.a.remotepay.RetrieveDeviceStatusRequest;return r.setSendLastMessage(!0),e.connector.retrieveDeviceStatus(r),Object(I.a)(Object(I.a)({},e),{},{connected:!0});default:return e}},devices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"clearDevices":return Object(I.a)(Object(I.a)({},e),{},{list:[]});case"clearDeviceId":return Object(I.a)(Object(I.a)({},e),{},{selected:""});case"setDeviceId":return Object(I.a)(Object(I.a)({},e),{},{selected:a||""});case"setDevices":return Object(I.a)(Object(I.a)({},e),{},{list:a||[]});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"clearError":return V;case"setError":return Object(I.a)(Object(I.a)({},e),{},{message:a.message,stack:a.stack});case"@@connector/onDeviceError":return Object(I.a)(Object(I.a)({},e),{},{message:"Device Error ".concat(a.message),stack:null});default:return e}},signature:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,r=arguments.length>1?arguments[1]:void 0,c=r.type,o=r.payload;switch(c){case"clearSignature":return F;case"setSignature":return{width:(null===o||void 0===o?void 0:o.width)||0,height:(null===o||void 0===o?void 0:o.height)||0,strokes:(null===o||void 0===o?void 0:o.strokes)||[]};case"@@connector/onVerifySignatureRequest":return{width:(null===(e=o.signature)||void 0===e?void 0:e.width)||0,height:(null===(t=o.signature)||void 0===t?void 0:t.height)||0,strokes:(null===(n=o.signature)||void 0===n?void 0:n.strokes)||[]};default:return a}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"clearStatus":return"";case"setStatus":return a||"";case"@@connector/onDeviceReady":case"@@connector/onResetDeviceResponse":return"Ready";case"@@connector/onDeviceActivityStart":return a.message;case"@@connector/onSaleResponse":case"@@connector/onVoidPaymentResponse":return"Ready";case"@@connector/onConfirmPaymentRequest":return a.challenges[0].message;case"@@connector/onVerifySignatureRequest":return"Verify Signature";default:return e}},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"setActiveTransaction":if(a.id){var r=e.data[a.id]||{};return Object(I.a)(Object(I.a)({},e),{},{active:a.id,data:Object(I.a)(Object(I.a)({},e.data),{},Object(l.a)({},a.id,Object(I.a)(Object(I.a)({},e.data[a.id]),{},{id:a.id,timestamp:Date.now(),type:a.type||r.type,amount:a.amount||r.amount||0,tipAmount:a.tipAmount||r.tipAmount||0})))})}return Object(I.a)(Object(I.a)({},e),{},{active:""});case"hideTransaction":return Object(I.a)(Object(I.a)({},e),{},{data:Object(I.a)(Object(I.a)({},e.data),{},Object(l.a)({},a,Object(I.a)(Object(I.a)({},e.data[a]),{},{visible:!1})))});case"showTransaction":return Object(I.a)(Object(I.a)({},e),{},{data:Object(I.a)(Object(I.a)({},e.data),{},Object(l.a)({},a,Object(I.a)(Object(I.a)({},e.data[a]),{},{visible:!0})))});case"removeTransaction":var c=Object(I.a)(Object(I.a)({},e),{},{data:Object(I.a)({},e.data)});return delete c.data[a],c;case"updateTransaction":var o=e.data[a.id]||{};return Object(I.a)(Object(I.a)({},e),{},{data:Object(I.a)(Object(I.a)({},e.data),{},Object(l.a)({},a.id,Object(I.a)(Object(I.a)({},o),{},{id:a.id,timestamp:Date.now(),visible:a.visible||o.visible||!1,amount:a.amount||o.amount||0,tipAmount:a.tipAmount||o.tipAmount||0,type:a.type||o.type||"",payment:a.payment||o.payment||null})))});case"@@connector/onSaleResponse":return a.success?Object(I.a)(Object(I.a)({},e),{},{active:"",data:Object(I.a)(Object(I.a)({},e.data),{},Object(l.a)({},a.payment.externalPaymentId,Object(I.a)(Object(I.a)({},e.data[a.payment.externalPaymentId]),{},{id:a.payment.externalPaymentId,timestamp:Date.now(),visible:!0,type:w,payment:a.payment})))}):e;case"@@connector/onVoidPaymentResponse":return a.success?Object(I.a)(Object(I.a)({},e),{},{active:"",data:Object(I.a)(Object(I.a)({},e.data),{},Object(l.a)({},a.payment.externalPaymentId,Object(I.a)(Object(I.a)({},e.data[a.payment.externalPaymentId]),{},{id:a.payment.externalPaymentId,timestamp:Date.now(),visible:!0,type:N,payment:a.payment})))}):e;default:return e}}}),Q=n(9),ee=function(e){return e.configuration},te=Object(Q.a)(ee,(function(e){return e.friendlyId||"Virtual Keypad"})),ne=Object(Q.a)(ee,(function(e){return e.manualCardEntry||!1})),ae=Object(Q.a)(ne,(function(e){return e?P.a.CardEntryMethods.DEFAULT|P.a.CardEntryMethods.CARD_ENTRY_METHOD_MANUAL:P.a.CardEntryMethods.DEFAULT})),re=Object(Q.a)(ee,(function(e){return e.autoConnect||!1})),ce=Object(Q.a)(ee,(function(e){return e.loading||!1})),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=e.stack;return{type:"setError",payload:{message:t,stack:n}}},ie=function(e){return{type:"setActions",payload:e}},ue=function(e){return e.connection},se=Object(Q.a)(ue,(function(e){return e.connector})),le=(Object(Q.a)(ue,(function(e){return e.connected})),function(e){return{type:"setStatus",payload:e}}),de=function(e){var t=e.configuration,n=e.devices;return localStorage.setItem("clover/virtual-keypad",JSON.stringify({configuration:Object(I.a)(Object(I.a)({},t),{},{loading:void 0}),devices:Object(I.a)(Object(I.a)({},_),{},{selected:n.selected})}))},me=function(e){return{type:"setConfiguration",payload:{cloverDomain:e.cloverDomain,merchantId:e.merchantId,accessToken:e.accessToken,friendlyId:e.friendlyId,manualCardEntry:e.manualCardEntry,autoConnect:e.autoConnect}}},pe=function(e){return{type:"setDeviceId",payload:e}},fe=function(e){return{type:"setDevices",payload:e}},ve=function(e){var t=e.cloverDomain,n=e.merchantId,a=e.accessToken,r=e.friendlyId,c=e.manualCardEntry,o=e.autoConnect;return function(){var e=Object(K.a)(q.a.mark((function e(i,u){var s;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i({type:"configure",payload:{cloverDomain:t,merchantId:n,accessToken:a,friendlyId:r,manualCardEntry:c,autoConnect:o}}),e.next=4,i({type:"setConfigurationLoading"});case 4:return e.next=6,i(me({cloverDomain:t,merchantId:n,accessToken:a,friendlyId:r,manualCardEntry:c,autoConnect:o}));case 6:return de(u()),e.next=9,G({cloverDomain:t,merchantId:n,accessToken:a});case 9:return s=e.sent,e.next=12,i(fe(s));case 12:if(s.length){e.next=14;break}throw new Error("Merchant has no devices.");case 14:if(s.some((function(e){return e.apps[j]}))){e.next=16;break}throw new Error("Merchant has no devices with Cloud Pay Display installed.");case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(0),e.next=22,i(oe(e.t0));case 22:return e.prev=22,e.next=25,i({type:"setConfigurationNotLoading"});case 25:return e.finish(22);case 26:case"end":return e.stop()}}),e,null,[[0,18,22,26]])})));return function(t,n){return e.apply(this,arguments)}}()},be=n(263),ye=n(73),he=n(266),Oe=n(265),Ee=function(e){return e.devices},je=Object(Q.a)(Ee,(function(e){return e.selected})),ge=Object(Q.a)(Ee,je,(function(e,t){var n=e.list;return Object(S.a)(n).sort((function(e,n){return e.id===t?-1:n.id===t?1:0}))})),ke=function(e){return{type:"setConnector",payload:e}},Ce=function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){var r,c,o,i,u,s,d,m,p,f,v;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n({type:"connect",payload:e});case 3:return t.next=5,n(pe(e));case 5:if(r=a(),de(r),c=ee(r),o=c.cloverDomain,i=c.merchantId,u=c.accessToken,s=c.friendlyId,d=ge(r).find((function(t){return t.id===e}))){t.next=11;break}throw new Error("Device not found.");case 11:if(d.apps[j]){t.next=13;break}throw new Error("Device does not have Cloud Pay Display installed.");case 13:m=P.a.CloverConnectorFactoryBuilder.createICloverConnectorFactory(Object(l.a)({},P.a.CloverConnectorFactoryBuilder.FACTORY_VERSION,P.a.CloverConnectorFactoryBuilder.VERSION_12)),p=m.createICloverConnector(new P.a.WebSocketCloudCloverDeviceConfigurationBuilder("virtual-keypad",e,i,u).setCloverServer(o).setFriendlyId(s).build()),f=function(e){Object(he.a)(a,e);var t=Object(Oe.a)(a);function a(){var e;return Object(be.a)(this,a),e=t.call(this),Object.keys(Object.getPrototypeOf(Object.getPrototypeOf(Object(ye.a)(e)))).forEach((function(t){e[t]=function(e){return n({type:"@@connector/".concat(t),payload:e})}})),e}return a}(P.a.remotepay.ICloverConnectorListener),v=new f,p.addCloverConnectorListener(v),n(ke(p)),n(le("Connecting...")),p.initializeConnection(),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),n(oe(t.t0));case 26:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e,n){return t.apply(this,arguments)}}()},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.type,a=e.amount,r=e.tipAmount;return{type:"setActiveTransaction",payload:{id:t,type:n,amount:a,tipAmount:r}}},Ne=function(e){return{type:"hideTransaction",payload:e}},xe=function(){return function(){var e=Object(K.a)(q.a.mark((function e(t,n){var a;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({type:"disconnect"});case 3:return a=se(n()),e.prev=4,a.showWelcomeScreen(),e.next=8,new Promise((function(e){return setTimeout(e,500)}));case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(4);case 12:return a.dispose(),e.next=15,t({type:"clearConnector"});case 15:return e.next=17,t({type:"clearDevices"});case 17:return e.next=19,t(we());case 19:e.next=25;break;case 21:return e.prev=21,e.t1=e.catch(0),e.next=25,t(oe(e.t1));case 25:case"end":return e.stop()}}),e,null,[[0,21],[4,10]])})));return function(t,n){return e.apply(this,arguments)}}()},De=function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"reset"})),n(le("Resetting...")),n({type:"clearActions"}),se(a()).resetDevice()}catch(r){n(oe(r))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Ie=function(e){return e.error},Se=function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"showWelcome"})),n(le("Ready")),n(ie([{type:f},{type:E}])),se(a()).showWelcomeScreen()}catch(r){n(oe(r))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},Ae=function(e){return{type:"appendBuffer",payload:e}},Te=function(e){return e.buffer},Re=function(e){return e.transactions},Pe=Object(Q.a)(Re,(function(e){var t=e.data;return Object.values(t)})),Le=Object(Q.a)(Re,(function(e){var t=e.active;return e.data[t]})),Me=Object(Q.a)(Le,(function(e){return null===e||void 0===e?void 0:e.type})),_e=Object(Q.a)(Le,(function(e){return((null===e||void 0===e?void 0:e.amount)||0)+((null===e||void 0===e?void 0:e.tipAmount)||0)})),Ve=Object(Q.a)(Pe,(function(e){return e.filter((function(e){return e.payment}))})),Fe=Object(Q.a)(Ve,(function(e){return e.filter((function(e){return e.visible}))})),Be=function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){var r,c,o,i,u,s,l;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n(Object(I.a)(Object(I.a)({},e),{},{type:"transaction"})),r=a(),c=Te(r),o=se(r),i=ae(r),n({type:"clearActions"}),n(le("Processing...")),n({type:"clearBuffer"}),u=+c){t.next=12;break}throw new Error("Amount is required");case 12:if(!isNaN(u)){t.next=14;break}throw new Error("Amount is invalid");case 14:if(!(u<=0||u>9999999)){t.next=16;break}throw new Error("Amount must between 0.01 and 99,999.99");case 16:s=P.a.CloverID.getNewId(),n(we({id:s,type:w,amount:u})),(l=new P.a.remotepay.SaleRequest).setAmount(u),l.setExternalId(s),l.setCardEntryMethods(i),n({type:"updateTransaction",payload:{id:(d={id:s,type:w,amount:u}).id,type:d.type,amount:d.amount,tipAmount:d.tipAmount,payment:d.payment}}),o.sale(l),t.next=31;break;case 27:t.prev=27,t.t0=t.catch(0),n(oe(t.t0)),n({type:"@@connector/onDeviceReady"});case 31:case"end":return t.stop()}var d}),t,null,[[0,27]])})));return function(e,n){return t.apply(this,arguments)}}()},Ye=function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){var r,c,o,i,u,s,l;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n({type:"voidPayment",payload:e}),r=e.id,c=e.externalPaymentId,o=e.orderId,i=e.amount,u=e.tipAmount,s=se(a()),n({type:"clearActions"}),n(le("Processing...")),r){t.next=8;break}throw new Error("No payment was specified");case 8:n(we({id:c,type:N,amount:i,tipAmount:u})),(l=new P.a.remotepay.VoidPaymentRequest).setPaymentId(r),l.setOrderId(o),l.setVoidReason(P.a.order.VoidReason.USER_CANCEL),s.voidPayment(l),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(0),n(oe(t.t0)),n({type:"@@connector/onDeviceReady"});case 21:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e,n){return t.apply(this,arguments)}}()};try{a=JSON.parse(localStorage.getItem("clover/virtual-keypad"))}catch(Tt){console.warn("Failed to initialize state from storage",Tt)}finally{a=a||void 0}var qe=function(e){var t=Object(x.a)(D.a),n=window.__REDUX_DEVTOOLS_EXTENSION__,a=n?n():function(e){return e};return Object(x.e)($,e,Object(x.d)(t,a))}(a),Ke=qe.getState();if(re(Ke)){var Ue=ee(Ke);qe.dispatch(ve(Ue))}var We,He,Xe=qe,Je=n(12),Ze=function(e){return e.actions},Ge=Object(Q.a)(Ze,(function(e){return e.find((function(e){return e.type===E}))})),ze=Object(Q.a)(Ze,(function(e){var t=e.filter((function(e){return e.type!==E}));if(2===t.length){var n,a,r=Object(Je.a)(t,2),c=r[0],o=r[1];if("No"===(null===(n=c.payload)||void 0===n?void 0:n.description)&&"Yes"===(null===(a=o.payload)||void 0===a?void 0:a.description))return[o,c]}return t})),$e=function(e){return e.signature},Qe=Object(Q.a)($e,(function(e){var t=e.strokes.map((function(e){return e.points})).flat().reduce((function(e,t){var n=e.x,a=e.X,r=e.y,c=e.Y;return{x:Math.min(n,t.x),X:Math.max(a,t.x),y:Math.min(r,t.y),Y:Math.max(c,t.y)}}),{x:1/0,X:-1/0,y:1/0,Y:-1/0});return[t.x,t.y,t.X-t.x,t.Y-t.y].join(" ")})),et=Object(Q.a)($e,(function(e){return e.strokes.map((function(e){return e.points.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join(" ")}))})),tt=function(e){return e.status},nt=n(23),at=n.n(nt),rt=n(131),ct=n.n(rt),ot=Object(Q.a)(se,ge,(function(e,t){return!e&&!t.length})),it=function(e){var t=e.size,n=void 0===t?28:t;return c.a.createElement("svg",{className:"Logo",id:"clover-logo-svg",xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 33.15 33.15","aria-labelledby":"svg-logo-title",role:"image"},c.a.createElement("title",{id:"svg-logo-title"},"Clover"),c.a.createElement("g",{id:"clover-symbol-2","data-name":"clover-symbol"},c.a.createElement("path",{d:"M191.45,85.64A7.5,7.5,0,1,0,184,93.09h7.49V85.64Z",transform:"translate(-176.46 -77.01)"}),c.a.createElement("path",{d:"M193.61,85.64a7.5,7.5,0,1,1,7.49,7.45h-7.49V85.64Z",transform:"translate(-176.46 -77.01)"}),c.a.createElement("path",{d:"M193.61,102.7a7.5,7.5,0,1,0,7.49-7.45h-7.49v7.45Z",transform:"translate(-176.46 -77.01)"}),c.a.createElement("path",{d:"M191.46,102.7A7.5,7.5,0,1,1,184,95.25h7.49v7.45Zm-7.5,5.35a5.38,5.38,0,0,0,5.4-5.35V97.36H184a5.35,5.35,0,1,0,0,10.7h0Z",transform:"translate(-176.46 -77.01)"})))},ut=function(){var e=Object(u.b)(),t=Object(u.c)(ee),n=Object(u.c)(ce),a=Object(u.c)(ot),o=ct.a.parse(window.location.search),i=ct.a.parse(window.location.hash),s=Object(r.useState)(t.cloverDomain||"https://www.clover.com"),l=Object(Je.a)(s,2),d=l[0],m=l[1],p=Object(r.useState)(o.merchant_id||t.merchantId),f=Object(Je.a)(p,2),v=f[0],b=f[1],y=Object(r.useState)(i.access_token||t.accessToken),h=Object(Je.a)(y,2),O=h[0],E=h[1],j=Object(r.useState)(t.friendlyId||"Virtual Keypad"),g=Object(Je.a)(j,2),k=g[0],C=g[1],w=Object(r.useState)(t.manualCardEntry||!1),N=Object(Je.a)(w,2),x=N[0],D=N[1],I=Object(r.useState)(t.autoConnect||!1),S=Object(Je.a)(I,2),A=S[0],T=S[1],R=Object(r.useState)(!1),P=Object(Je.a)(R,2),L=P[0],M=P[1],_=Object(r.useMemo)((function(){return n||L}),[n,L]),V=Object(r.useCallback)(function(){var t=Object(K.a)(q.a.mark((function t(n){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.preventDefault(),M(!0),t.next=5,e(ve({cloverDomain:d,merchantId:v,accessToken:O,friendlyId:k,manualCardEntry:x,autoConnect:A}));case 5:return t.prev=5,M(!1),t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[0,,5,8]])})));return function(e){return t.apply(this,arguments)}}(),[e,d,v,O,k,x,A]),F=Object(r.useCallback)((function(e){e.preventDefault(),m(t.cloverDomain),b(t.merchantId),E(t.accessToken),C(t.friendlyId),D(t.manualCardEntry),T(t.autoConnect)}),[t,m,b,E,C,D,T]);return a?c.a.createElement("form",{onSubmit:V,onReset:F},c.a.createElement("div",{className:"Configuration card"},c.a.createElement("div",{className:"card-header"},c.a.createElement(it,null),c.a.createElement("h3",null,"Virtual Keypad")),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Clover Domain:"),c.a.createElement("input",{type:"text",className:"form-control",value:d,onChange:function(e){return m(e.target.value)},disabled:_})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Merchant ID:"),c.a.createElement("input",{type:"text",className:"form-control",value:v,onChange:function(e){return b(e.target.value)},disabled:_})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Access Token:"),c.a.createElement("input",{type:"text",className:"form-control",value:O,onChange:function(e){return E(e.target.value)},disabled:_})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Friendly ID:"),c.a.createElement("input",{type:"text",className:"form-control",value:k,onChange:function(e){return C(e.target.value)},disabled:_})),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"custom-control custom-switch"},c.a.createElement("input",{id:"chkManualCardEntry",type:"checkbox",className:"custom-control-input",disabled:_,checked:x,onChange:function(){return D(!x)}}),c.a.createElement("label",{className:"custom-control-label font-weight-normal",htmlFor:"chkManualCardEntry"},"Allow Manual Card Entry"))),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"custom-control custom-switch"},c.a.createElement("input",{id:"chkAutoConnect",type:"checkbox",className:"custom-control-input",disabled:_,checked:A,onChange:function(){return T(!A)}}),c.a.createElement("label",{className:"custom-control-label font-weight-normal",htmlFor:"chkAutoConnect"},"Auto-connect")))),c.a.createElement("div",{className:"card-footer"},c.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:_},"Submit"),c.a.createElement("button",{type:"reset",className:"btn btn-secondary ml-2",disabled:_},"Reset")))):null},st=Object(Q.a)(se,ge,(function(e,t){return!e&&!!t.length})),lt=function(e){var t=e.device,n=e.active,a=e.disabled,r=e.onClick,o=t.apps[j],i=o?"Cloud Pay Display is installed":"Cloud Pay Display is NOT installed";return c.a.createElement("button",{key:t.id,type:"button",className:at()("list-group-item d-flex justify-content-between align-items-center list-group-item-action p-1",{disabled:a,"list-group-item-primary":!a&&n}),onClick:r},c.a.createElement("div",{className:"p-1"},t.name&&c.a.createElement("div",{className:"font-weight-bold"},t.name),t.productName," ",t.serial),c.a.createElement("span",{className:at()("badge p-1",{"badge-secondary":a,"badge-success":!a&&o,"badge-warning":!a&&!o}),role:"img","aria-label":i,title:i},"\u2601\ufe0f"))},dt=function(){var e=Object(u.b)(),t=Object(u.c)(ge),n=Object(u.c)(je),a=Object(u.c)(st),o=Object(r.useState)(),i=Object(Je.a)(o,2),s=i[0],l=i[1],d=Object(r.useCallback)((function(t){return function(){var n=Object(K.a)(q.a.mark((function n(a){return q.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a.preventDefault(),l(!0),n.next=5,e(Ce(t));case 5:return n.prev=5,l(!1),n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[0,,5,8]])})));return function(e){return n.apply(this,arguments)}}()}),[e]);return a?c.a.createElement("div",{className:"Devices card"},c.a.createElement("div",{className:"card-header"},c.a.createElement(it,null),c.a.createElement("h3",null,"Virtual Keypad"),c.a.createElement("button",{className:"close text-light",title:"Cancel",onClick:function(){return e({type:"clearDevices"})},disabled:s},"\xd7")),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Select Device:"),c.a.createElement("div",{className:"list-group"},t.map((function(e){return c.a.createElement(lt,{key:e.id,device:e,disabled:s,active:e.id===n,onClick:d(e.id)})})))))):null},mt=(We={},Object(l.a)(We,d,(function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"acceptPayment"})),n(le("Accepting payment...")),n({type:"clearActions"}),se(a()).acceptPayment(e.payload.payment)}catch(Tt){n(oe(Tt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(l.a)(We,m,(function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){var r,c;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"acceptSignature"})),n(le("Accepting signature...")),n({type:"clearActions"}),n({type:"clearSignature"}),r=se(a()),(c=new P.a.remotepay.VerifySignatureRequest).setPayment(e.payload.payment),r.acceptSignature(c)}catch(Tt){n(oe(Tt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(l.a)(We,p,xe),Object(l.a)(We,f,(function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){var r,c,o;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"identify"})),n(le("Identifying...")),n(ie([{type:O,payload:{description:"OK"}},{type:p,payload:{description:"Cancel"}}])),r=a(),c=se(r),o=te(r),c.showMessage("".concat(o," connected"))}catch(Tt){n(oe(Tt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(l.a)(We,v,(function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){var r,c;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"invokeInputOption"})),r=se(a()),(c=new P.a.remotepay.InputOption).setDescription(e.payload.description),c.setKeyPress(e.payload.keyPress),r.invokeInputOption(c)}catch(Tt){n(oe(Tt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(l.a)(We,b,(function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"rejectPayment"})),n(le("Rejecting payment...")),n({type:"clearActions"}),se(a()).rejectPayment(e.payload.payment,e.payload.challenges[0])}catch(Tt){n(oe(Tt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(l.a)(We,y,(function(e){return function(){var t=Object(K.a)(q.a.mark((function t(n,a){var r,c;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"rejectSignature"})),n(le("Rejecting signature...")),n({type:"clearActions"}),n({type:"clearSignature"}),r=se(a()),(c=new P.a.remotepay.VerifySignatureRequest).setPayment(e.payload.payment),r.rejectSignature(c)}catch(Tt){n(oe(Tt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(l.a)(We,h,De),Object(l.a)(We,O,Se),Object(l.a)(We,E,Be),We),pt={TRANSACTION:"TRANSACTION",HISTORY:"HISTORY"},ft=(He={},Object(l.a)(He,pt.TRANSACTION,"Keypad"),Object(l.a)(He,pt.HISTORY,"History"),He),vt=Object(Q.a)(se,(function(e){return!!e})),bt=n(589),yt=function(e){var t=e.width,n=void 0===t?250:t,a=Object(U.a)(e,["width"]),r=Object(u.c)(Qe),o=Object(u.c)(et);return o.length?c.a.createElement("div",{className:"Signature"},c.a.createElement("svg",Object.assign({viewBox:r,width:n},a),o.map((function(e,t){return c.a.createElement("polyline",{key:t,points:e,fill:"none",stroke:"black"})})))):null},ht=function(){var e=Object(u.c)(tt),t=Object(u.c)(Te),n=Object(u.c)(Me),a=Object(u.c)(_e);return c.a.createElement("div",{className:"Screen alert alert-secondary"},!!a&&c.a.createElement("div",{className:"Transaction d-flex justify-content-between bg-white rounded-top border-bottom border-secondary"},c.a.createElement("div",{className:"font-italic"},Object(bt.a)(n)),c.a.createElement("div",{className:"font-weight-bold"},z(a))),!t&&c.a.createElement("div",null,e),c.a.createElement(yt,null),t&&c.a.createElement("div",{className:"text-muted"},t),t&&c.a.createElement("h3",{className:"text-right"},z(t)))},Ot=n(264),Et=Object(r.forwardRef)((function(e,t){var n,a=e.action,o=e.height,i=e.color,u=e.keyCodes,s=e.disabled,l=e.onClick,d=e.moreActions,m=e.onMoreClick,p=e.children,f=Object(U.a)(e,["action","height","color","keyCodes","disabled","onClick","moreActions","onMoreClick","children"]),v=Object(r.useState)(!1),b=Object(Je.a)(v,2),y=b[0],h=b[1];Object(r.useEffect)((function(){if(y){var e=function(){return h(!1)};return document.addEventListener("click",e),document.addEventListener("touch",e),document.addEventListener("keydown",e),function(){document.removeEventListener("click",e),document.removeEventListener("touch",e),document.removeEventListener("keydown",e)}}}),[y]),Object(r.useEffect)((function(){if(!s){var e=function(e){return!u.includes(e.code)||(e.preventDefault(),l(),!1)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}}),[s,u,l]);var O=a?Object(bt.a)((null===(n=a.payload)||void 0===n?void 0:n.description)||(null===a||void 0===a?void 0:a.type)||""):p;return(null===d||void 0===d?void 0:d.length)?c.a.createElement("div",{className:"btn-group"},c.a.createElement("button",Object.assign({type:"button",className:"btn btn-dark action rounded-left",onClick:l,disabled:s},f,{title:"Shortcut keys: ".concat(u.join(", "))}),O||c.a.createElement("span",null,"\xa0")),c.a.createElement("button",{type:"button",className:"btn btn-dark action dropdown-toggle",onClick:function(){return h(!y)},disabled:s}),c.a.createElement("div",{className:at()("dropdown-menu bg-dark",{show:y})},d.map((function(e,t){var n;return c.a.createElement("button",{key:t,className:"dropdown-item bg-dark text-light",onClick:function(){return m(e)}},(null===(n=e.payload)||void 0===n?void 0:n.description)||e.type)})))):c.a.createElement("button",Object.assign({ref:t,type:"button",style:{height:o},className:at()("btn","text-".concat(i||"light"),{action:a,"btn-dark":a,"btn-outline-dark":!a}),disabled:s,onClick:l,title:"Shortcut keys: ".concat(u.join(", "))},f),O)})),jt=function(){var e=Object(u.b)(),t=Object(u.c)(ze),n=Object(u.c)(Ge),a=Object(r.useState)(!1),o=Object(Je.a)(a,2),i=o[0],s=o[1],l=Object(r.useMemo)((function(){return!n||i}),[n,i]),d=Object(r.useCallback)(function(){var t=Object(K.a)(q.a.mark((function t(n){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(!0),n.type===v&&setTimeout((function(){return s(!1)}),250),t.next=4,e(mt[n.type](n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,s]),m=function(e){return Object(K.a)(q.a.mark((function t(){return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d(e));case 1:case"end":return t.stop()}}),t)})))};Object(r.useEffect)((function(){t.length&&s(!1)}),[s,t]);var p=Object(r.useRef)(),f=Object(r.useState)(),b=Object(Je.a)(f,2),y=b[0],h=b[1];Object(r.useEffect)((function(){p.current&&h(p.current.offsetWidth)}),[p,h]);var O=Object(Ot.a)(t),E=O[0],j=O[1],g=O.slice(2);return c.a.createElement("div",{className:"Keys"},c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-6 p-1"},c.a.createElement(Et,{action:E||{},disabled:!E||i,keyCodes:["F1","NumpadDivide"],onClick:m(E)})),c.a.createElement("div",{className:"col-6 p-1"},c.a.createElement(Et,{action:j||{},disabled:!j||i,keyCodes:["F2","NumpadMultiply"],onClick:m(j),moreActions:g,onMoreClick:function(e){return d(e)}}))),c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(Et,{ref:p,height:y,disabled:l,keyCodes:["Numpad7","Digit7"],onClick:function(){return e(Ae("7"))}},"7")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(Et,{disabled:l,keyCodes:["Numpad8","Digit8"],onClick:function(){return e(Ae("8"))}},"8")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(Et,{disabled:l,keyCodes:["Numpad9","Digit9"],onClick:function(){return e(Ae("9"))}},"9")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(Et,{color:"danger",disabled:l,keyCodes:["NumpadSubtract","Escape"],onClick:function(){return e({type:"clearBuffer"})}},"X"))),c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(Et,{height:y,disabled:l,keyCodes:["Numpad4","Digit4"],onClick:function(){return e(Ae("4"))}},"4")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(Et,{disabled:l,keyCodes:["Numpad5","Digit5"],onClick:function(){return e(Ae("5"))}},"5")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(Et,{disabled:l,keyCodes:["Numpad6","Digit6"],onClick:function(){return e(Ae("6"))}},"6")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(Et,{color:"warning",disabled:l,keyCodes:["NumpadAdd","Backspace","Delete"],onClick:function(){return e({type:"undoBuffer"})}},"<"))),c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-9"},c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-4 p-1"},c.a.createElement(Et,{height:y,disabled:l,keyCodes:["Numpad1","Digit1"],onClick:function(){return e(Ae("1"))}},"1")),c.a.createElement("div",{className:"col-4 p-1"},c.a.createElement(Et,{disabled:l,keyCodes:["Numpad2","Digit2"],onClick:function(){return e(Ae("2"))}},"2")),c.a.createElement("div",{className:"col-4 p-1"},c.a.createElement(Et,{disabled:l,keyCodes:["Numpad3","Digit3"],onClick:function(){return e(Ae("3"))}},"3"))),c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-8 p-1"},c.a.createElement(Et,{height:y,disabled:l,keyCodes:["Numpad0","Digit0"],onClick:function(){return e(Ae("0"))}},"0")),c.a.createElement("div",{className:"col-4 p-1"},c.a.createElement(Et,{disabled:l,keyCodes:["NumpadDecimal","Period"],onClick:function(){return e(Ae("00"))}},"00")))),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(Et,{color:"success",disabled:l,keyCodes:["NumpadEnter","Enter"],onClick:function(){return e(Be())}},"O"))))},gt=function(e){var t=e.mode,n=e.setMode,a=Object(u.b)(),o=Object(r.useState)(!1),i=Object(Je.a)(o,2),s=i[0],l=i[1],d=Object(r.useCallback)((function(){return l(!s)}),[s,l]),m=Object(r.useCallback)((function(){return a(Se())}),[a]),p=Object(r.useCallback)((function(){return a(De())}),[a]),f=Object(r.useCallback)((function(){return a(xe())}),[a]);return Object(r.useEffect)((function(){if(s){var e=function(){return l(!1)};return document.addEventListener("click",e),document.addEventListener("touch",e),document.addEventListener("keydown",e),function(){document.removeEventListener("click",e),document.removeEventListener("touch",e),document.removeEventListener("keydown",e)}}}),[s,l]),c.a.createElement("div",{className:"dropdown"},c.a.createElement("button",{type:"button",className:"btn btn-sm btn-outline-dark text-light",onClick:d},"\u2630"),c.a.createElement("div",{className:at()("dropdown-menu dropdown-menu-right",{show:s})},Object.values(pt).map((function(e){return c.a.createElement("button",{key:e,className:"dropdown-item",type:"button",onClick:function(){return n(e)}},c.a.createElement("div",{className:"custom-control custom-checkbox"},c.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"chkMode-".concat(e),checked:e===t,readOnly:!0}),c.a.createElement("label",{className:"custom-control-label",htmlFor:"chkMode-".concat(e)},ft[e])))})),c.a.createElement("div",{className:"dropdown-divider"}),c.a.createElement("button",{className:"dropdown-item",type:"button",onClick:m},"Show Welcome"),c.a.createElement("button",{className:"dropdown-item",type:"button",onClick:p},"Reset Device"),c.a.createElement("button",{className:"dropdown-item",type:"button",onClick:f},"Disconnect")))},kt=n(588),Ct=n(587),wt=function(e){var t=e.amount,n=e.tipAmount,a=e.payment,r=(t||0)+(n||0),c=((null===a||void 0===a?void 0:a.amount)||0)+((null===a||void 0===a?void 0:a.tipAmount)||0);return{start:r,final:c,partial:r>c,remaining:r-c}},Nt=function(e){var t=e.transaction,n=t||{},a=n.type,r=n.payment,o=Object(u.b)(),i=Object(s.useToasts)().removeToast,l=wt(t),d=function(){var e=Object(K.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({type:"setBuffer",payload:l.remaining||""});case 3:return e.next=5,o(Be());case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,o(oe(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(K.a)(q.a.mark((function e(){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(t.id),e.next=4,o(Ne(t.id));case 4:return e.next=6,o(Ye(r));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,o(oe(e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"Transaction"},t.type!==N&&l.partial&&c.a.createElement("div",{className:"alert alert-warning"},c.a.createElement("h6",{className:"alert-heading"},"Partial Payment"),c.a.createElement("div",null,"Remaining: ",z(l.remaining))),c.a.createElement("h5",null,Object(bt.a)(a||"Transaction")," Details"),c.a.createElement("table",{className:"table table-sm small mb-0"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Payment ID:"),c.a.createElement("td",null,r.id)),c.a.createElement("tr",null,c.a.createElement("th",null,"External ID:"),c.a.createElement("td",null,r.externalPaymentId)),c.a.createElement("tr",null,c.a.createElement("th",null,"Order ID:"),c.a.createElement("td",null,r.order.id)),!!r.tipAmount&&c.a.createElement("tr",null,c.a.createElement("th",null,"Total:"),c.a.createElement("td",null,z(r.amount+r.tipAmount))),c.a.createElement("tr",null,c.a.createElement("th",null,"Amount:"),c.a.createElement("td",null,z(r.amount))),!!r.tipAmount&&c.a.createElement("tr",null,c.a.createElement("th",null,"Tip:"),c.a.createElement("td",null,z(r.tipAmount))),c.a.createElement("tr",null,c.a.createElement("th",null,"Card:"),c.a.createElement("td",null,c.a.createElement("div",null,r.cardType),c.a.createElement("div",null,function(e){var t=e.first6,n=e.last4;return[t,"*".repeat(6),n].join("").replace(/.{4}/g," $&").trim()}(r.cardTransaction)),r.cardTransaction.cardholderName&&c.a.createElement("div",null,r.cardTransaction.cardholderName))))),t.type===w&&c.a.createElement("div",null,l.partial&&c.a.createElement("button",{className:"btn btn-primary btn-sm mr-1",onClick:d},"Process ",z(l.remaining)),c.a.createElement("button",{key:"void",className:"btn btn-danger btn-sm",onClick:m},"Void")))},xt=function(){var e=Object(u.b)(),t=Object(s.useToasts)().addToast;return function(n){var a,r=wt(n);a=n.type===N?"info":r.final>=r.start?"success":r.final<r.start?"warning":"info",t(c.a.createElement(Nt,{transaction:n}),{id:n.id,appearance:a,autoDismiss:!1,onDismiss:function(){e(Ne(n.id))}})}},Dt=function(){var e=Object(u.c)(Ve),t=xt(),n=Object(r.useMemo)((function(){return e.sort((function(e,t){return Object(Ct.a)(e.timestamp,t.timestamp)}))}),[e]);return c.a.createElement("div",{className:"History"},c.a.createElement("table",{className:"table table-sm table-hover table-secondary table-striped"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Date"),c.a.createElement("th",null,"Type"),c.a.createElement("th",{className:"text-right"},"Amount"))),c.a.createElement("tbody",null,n.map((function(e){return c.a.createElement("tr",{key:e.id,role:"button",onClick:function(){return t(e)}},c.a.createElement("td",null,function(e){var t=e.timestamp;return t?Object(kt.a)(t,"M/d h:mm a"):"??"}(e)),c.a.createElement("td",null,e.type),c.a.createElement("td",{className:"text-right"},function(e){var t=e.amount,n=e.tipAmount,a=e.payment;return z(a?a.amount+a.tipAmount:t+n)}(e)))})))))},It=(n(583),function(){var e=Object(u.c)(vt),t=Object(r.useState)(pt.TRANSACTION),n=Object(Je.a)(t,2),a=n[0],o=n[1];return e?c.a.createElement("div",{className:"Keypad card"},c.a.createElement("div",{className:"card-header"},c.a.createElement(it,null),c.a.createElement("h3",null,"Virtual Keypad"),c.a.createElement(gt,{mode:a,setMode:o})),c.a.createElement("div",{className:"card-body"},a===pt.TRANSACTION&&c.a.createElement(ht,null),a===pt.TRANSACTION&&c.a.createElement(jt,null),a===pt.HISTORY&&c.a.createElement(Dt,null))):null}),St=function(e){var t=e.error,n=t.message,a=t.stack,o=Object(r.useState)(!1),i=Object(Je.a)(o,2),u=i[0],s=i[1];return Object(r.useEffect)((function(){return function(){document.querySelectorAll(".Error.expanded").length-(u?1:0)||document.querySelector(".react-toast-notifications__container").classList.remove("expanded")}}),[u]),c.a.createElement("div",{className:at()("Error",{expanded:u})},c.a.createElement("h5",null,n),!!a&&!u&&c.a.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){document.querySelector(".react-toast-notifications__container").classList.add("expanded"),s(!0)}},"Show details..."),!!a&&u&&c.a.createElement("pre",{className:"mb-0"},c.a.createElement("code",null,a)))},At=(n(584),function(){return function(e){var t=Object(u.b)(),n=Object(u.c)(Ie),a=Object(s.useToasts)().addToast;Object(r.useEffect)((function(){n.message&&a(c.a.createElement(St,{error:n}),{id:"error",appearance:"error",autoDismiss:e,onDismiss:function(){t({type:"clearError"})}})}),[a,t,n,e])}(function(){var e=Object(r.useState)(!1),t=Object(Je.a)(e,2),n=t[0],a=t[1];return Object(r.useEffect)((function(){if(!n){var e=function(){return a(!0)};return document.addEventListener("mouseover",e),function(){return document.removeEventListener("mouseover",e)}}}),[n,a]),n}()),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ms,n=void 0===t?500:t;Object(r.useEffect)((function(){var e=0,t=function(t){if(1===t.touches.length){var a=Date.now();1===t.touches.length&&a>e&&(t.preventDefault(),t.target.click()),e=a+n}};return document.body.addEventListener("touchstart",t,{passive:!1}),function(){return document.body.removeEventListener("touchstart",t,{passive:!1})}}),[n])}(),function(){var e=Object(u.c)(Fe),t=xt();Object(r.useEffect)((function(){e.forEach(t)}),[e,t])}(),c.a.createElement("div",{className:at()("App container maxwidth")},c.a.createElement(ut,null),c.a.createElement(dt,null),c.a.createElement(It,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(u.a,{store:Xe},c.a.createElement(s.ToastProvider,{placement:"bottom-center"},c.a.createElement(At,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[268,1,2]]]);
//# sourceMappingURL=main.197b82a3.chunk.js.map