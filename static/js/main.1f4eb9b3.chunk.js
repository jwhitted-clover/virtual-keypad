(this["webpackJsonpvirtual-keypad"]=this["webpackJsonpvirtual-keypad"]||[]).push([[0],{266:function(e,t,n){e.exports=n(583)},581:function(e,t,n){},582:function(e,t,n){},583:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(22),i=n.n(o),l=n(7),u=n(27),s=n(10),d="ACCEPT_PAYMENT",m="ACCEPT_SIGNATURE",p="DISCONNECT",v="IDENTIFY",f="INVOKE_INPUT_OPTION",b="REJECT_PAYMENT",y="REJECT_SIGNATURE",E="RESET",O="SHOW_WELCOME",h="TRANSACTION",j="VOID_PAYMENT",g="CLOUD_PAY_DISPLAY",N=Object(s.a)({},g,"Cloud Pay Display"),k=Object.fromEntries(Object.entries(N).map((function(e){return e.reverse()}))),C="SALE",T="VOID",w=n(28),S=n(260),I=n(3),D=n(73),A=[],R={cloverDomain:"",merchantId:"",accessToken:"",friendlyId:"",autoConnect:!1},x=n(13),_=n.n(x),P={connector:null,connected:!1},F={list:[],selected:""},M={message:null,stack:null},U={id:"",externalId:"",orderId:"",amount:0,tipAmount:0,card:{type:"",first6:"",last4:"",name:""}},V={width:0,height:0,strokes:[]},L={amount:0,type:""},B=n(4),Y=n.n(B),q=n(6),G=function(e){var t=e.cloverDomain,n=e.merchantId,a=e.deviceId,r=e.accessToken;return fetch(new URL("/v2/merchant/".concat(n,"/device/").concat(a,"/current_apps?access_token=").concat(r),t).toString(),{method:"GET",headers:{accept:"application/json","content-type":"application/json"}}).then((function(e){return e.json()}))},K=function(e){var t=e.cloverDomain,n=e.merchantId,a=e.accessToken;return fetch(new URL("/v3/merchants/".concat(n,"/devices?access_token=").concat(a),t).toString(),{method:"GET",headers:{accept:"application/json","content-type":"application/json"}}).then((function(e){return e.json()}))},W=function(e,t){var n=k[t.appName];return n?Object(I.a)(Object(I.a)({},e),{},Object(s.a)({},n,!0)):e},X=function(){var e=Object(q.a)(Y.a.mark((function e(t){var n,a,r,c,o,i;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cloverDomain,a=t.merchantId,r=t.accessToken,e.next=3,K({cloverDomain:n,merchantId:a,accessToken:r});case 3:return c=e.sent,o=c.elements,e.next=7,Promise.all(o.map((function(e){var t=e.id;return G({cloverDomain:n,merchantId:a,accessToken:r,deviceId:t})})));case 7:return i=e.sent,e.abrupt("return",o.map((function(e,t){return Object(I.a)(Object(I.a)({},e),{},{apps:i[t].applications.reduce(W,{})})})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){var t=+e;return!isNaN(t)&&t>=0?(t/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):""},H={},J=Object(w.c)({actions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"ACTIONS_APPEND":var r=e.some((function(e){var t,n;return e.type===a.type&&(null===(t=e.payload)||void 0===t?void 0:t.description)===(null===(n=a.payload)||void 0===n?void 0:n.description)}));return r?e:[].concat(Object(D.a)(e),[a]);case"ACTIONS_SET":return a||[];case"@@connector/onDeviceReady":case"@@connector/onResetDeviceResponse":return[{type:v},{type:E},{type:h}];case"@@connector/onDeviceActivityStart":return a.inputOptions.map((function(e){return{type:f,payload:e}}));case"@@connector/onSaleResponse":case"@@connector/onVoidPaymentResponse":return[{type:v},{type:E},{type:h}];case"@@connector/onConfirmPaymentRequest":return[{type:d,payload:Object(I.a)({description:"Accept"},a)},{type:b,payload:Object(I.a)({description:"Reject"},a)}];case"@@connector/onVerifySignatureRequest":return[{type:m,payload:Object(I.a)({description:"Accept"},a)},{type:y,payload:Object(I.a)({description:"Reject"},a)}];default:return e}},buffer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"BUFFER_RESET":return"";case"BUFFER_APPEND":return(e+a).replace(/^0+/,"").slice(0,7);case"BUFFER_SET":return a;case"BUFFER_UNDO":return e.length?e.slice(0,e.length-1):"";default:return e}},configuration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"CONFIGURATION_LOADING":return Object(I.a)(Object(I.a)({},e),{},{loading:a||void 0});case"CONFIGURATION_SET":return Object(I.a)(Object(I.a)({},e),{},{cloverDomain:a.cloverDomain||"",merchantId:a.merchantId||"",accessToken:a.accessToken||"",friendlyId:a.friendlyId||"",autoConnect:a.autoConnect||!1});default:return e}},connection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"CONNECTION_SET_CONNECTOR":try{(null===e||void 0===e?void 0:e.connector)&&e.connector.dispose()}catch(c){}return Object(I.a)(Object(I.a)({},e),{},{connector:a,connected:!1});case"@@connector/onDeviceDisconnected":return Object(I.a)(Object(I.a)({},e),{},{connected:!1});case"@@connector/onDeviceReady":var r=new _.a.remotepay.RetrieveDeviceStatusRequest;return r.setSendLastMessage(!0),e.connector.retrieveDeviceStatus(r),Object(I.a)(Object(I.a)({},e),{},{connected:!0});default:return e}},devices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"DEVICES_SET_SELECTED":return Object(I.a)(Object(I.a)({},e),{},{selected:a||""});case"DEVICES_SET_LIST":return Object(I.a)(Object(I.a)({},e),{},{list:a||[]});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"ERROR_SET":return Object(I.a)(Object(I.a)({},e),{},{message:a.message,stack:a.stack});case"@@connector/onDeviceError":return Object(I.a)(Object(I.a)({},e),{},{message:"Device Error ".concat(a.message),stack:null});default:return e}},payment:function(){var e,t,n,a,r,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,o=arguments.length>1?arguments[1]:void 0,i=o.type,l=o.payload;switch(i){case"PAYMENT_SET":return{id:(null===l||void 0===l?void 0:l.id)||"",externalId:(null===l||void 0===l?void 0:l.externalPaymentId)||"",orderId:(null===l||void 0===l||null===(e=l.order)||void 0===e?void 0:e.id)||"",amount:(null===l||void 0===l?void 0:l.amount)||0,tipAmount:(null===l||void 0===l?void 0:l.tipAmount)||0,card:{type:(null===l||void 0===l||null===(t=l.cardTransaction)||void 0===t?void 0:t.cardType)||"",first6:(null===l||void 0===l||null===(n=l.cardTransaction)||void 0===n?void 0:n.first6)||"",last4:(null===l||void 0===l||null===(a=l.cardTransaction)||void 0===a?void 0:a.last4)||"",name:(null===l||void 0===l||null===(r=l.cardTransaction)||void 0===r?void 0:r.cardholderName)||""}};case"@@connector/onSaleResponse":var u,s,d,m,p,v,f,b,y,E,O,h,j,g;return l.success?{id:(null===l||void 0===l||null===(u=l.payment)||void 0===u?void 0:u.id)||"",externalId:(null===l||void 0===l||null===(s=l.payment)||void 0===s?void 0:s.externalPaymentId)||"",orderId:(null===l||void 0===l||null===(d=l.payment)||void 0===d||null===(m=d.order)||void 0===m?void 0:m.id)||"",amount:(null===l||void 0===l||null===(p=l.payment)||void 0===p?void 0:p.amount)||0,tipAmount:(null===l||void 0===l||null===(v=l.payment)||void 0===v?void 0:v.tipAmount)||0,card:{type:(null===l||void 0===l||null===(f=l.payment)||void 0===f||null===(b=f.cardTransaction)||void 0===b?void 0:b.cardType)||"",first6:(null===l||void 0===l||null===(y=l.payment)||void 0===y||null===(E=y.cardTransaction)||void 0===E?void 0:E.first6)||"",last4:(null===l||void 0===l||null===(O=l.payment)||void 0===O||null===(h=O.cardTransaction)||void 0===h?void 0:h.last4)||"",name:(null===l||void 0===l||null===(j=l.payment)||void 0===j||null===(g=j.cardTransaction)||void 0===g?void 0:g.cardholderName)||""}}:U;case"@@connector/onResetDeviceResponse":return U;default:return c}},signature:function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,r=arguments.length>1?arguments[1]:void 0,c=r.type,o=r.payload;switch(c){case"SIGNATURE_SET":return{width:(null===o||void 0===o?void 0:o.width)||0,height:(null===o||void 0===o?void 0:o.height)||0,strokes:(null===o||void 0===o?void 0:o.strokes)||[]};case"@@connector/onVerifySignatureRequest":return{width:(null===(e=o.signature)||void 0===e?void 0:e.width)||0,height:(null===(t=o.signature)||void 0===t?void 0:t.height)||0,strokes:(null===(n=o.signature)||void 0===n?void 0:n.strokes)||[]};default:return a}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"STATUS_SET":return a||"";case"@@connector/onDeviceReady":case"@@connector/onResetDeviceResponse":return"Ready";case"@@connector/onDeviceActivityStart":return a.message;case"@@connector/onSaleResponse":case"@@connector/onVoidPaymentResponse":return"Ready";case"@@connector/onConfirmPaymentRequest":return a.challenges[0].message;case"@@connector/onVerifySignatureRequest":return"Verify Signature";default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"TRANSACTION_ADD_AMOUNT":return Object(I.a)(Object(I.a)({},e),{},{amount:e.amount+a});case"TRANSACTION_SET_AMOUNT":return Object(I.a)(Object(I.a)({},e),{},{amount:a});case"TRANSACTION_SET_TYPE":return Object(I.a)(Object(I.a)({},e),{},{type:a});case"TRANSACTION_RESET":return L;case"@@connector/onTipAdded":return Object(I.a)(Object(I.a)({},e),{},{amount:e.amount+a.tipAmount});case"@@connector/onSaleResponse":case"@@connector/onVoidPaymentResponse":case"@@connector/onResetDeviceResponse":case"@@action/".concat(h):return L;default:return e}},transactions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"TRANSACTIONS_HIDE":return Object(I.a)(Object(I.a)({},e),{},Object(s.a)({},a,Object(I.a)(Object(I.a)({},e[a]),{},{visible:!1})));case"TRANSACTIONS_SHOW":return Object(I.a)(Object(I.a)({},e),{},Object(s.a)({},a,Object(I.a)(Object(I.a)({},e[a]),{},{visible:!0})));case"TRANSACTIONS_REMOVE":var r=Object(I.a)({},e);return delete r[a],r;case"TRANSACTIONS_UPDATE":var c=e[a.id]||{};return Object(I.a)(Object(I.a)({},e),{},Object(s.a)({},a.id,Object(I.a)(Object(I.a)({},c),{},{id:a.id,visible:a.visible||c.visible||!1,amount:a.amount||c.amount||0,tipAmount:a.tipAmount||c.tipAmount||0,type:a.type||c.type||"",payment:a.payment||c.payment||null})));case"@@connector/onSaleResponse":return a.success?Object(I.a)(Object(I.a)({},e),{},Object(s.a)({},a.payment.externalPaymentId,Object(I.a)(Object(I.a)({},e[a.payment.externalPaymentId]),{},{id:a.payment.externalPaymentId,visible:!0,type:C,payment:a.payment}))):e;case"@@connector/onVoidPaymentResponse":return a.success?Object(I.a)(Object(I.a)({},e),{},Object(s.a)({},a.payment.externalPaymentId,Object(I.a)(Object(I.a)({},e[a.payment.externalPaymentId]),{},{id:a.payment.externalPaymentId,visible:!0,type:T,payment:a.payment}))):e;default:return e}}}),Z=n(8),$=function(e){return e.configuration},Q=Object(Z.a)($,(function(e){return e.friendlyId||"Virtual Keypad"})),ee=Object(Z.a)($,(function(e){return e.autoConnect||!1})),te=Object(Z.a)($,(function(e){return e.loading||!1})),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=e.stack;return{type:"ERROR_SET",payload:{message:t,stack:n}}},ae=function(e){return{type:"ACTIONS_SET",payload:e}},re=function(e){return e.connection},ce=Object(Z.a)(re,(function(e){return e.connector})),oe=(Object(Z.a)(re,(function(e){return e.connected})),function(e){return{type:"STATUS_SET",payload:e}}),ie=function(e){return{type:"SIGNATURE_SET",payload:e}},le=function(e){var t=e.configuration,n=e.devices;return localStorage.setItem("clover/virtual-keypad",JSON.stringify({configuration:Object(I.a)(Object(I.a)({},t),{},{loading:void 0}),devices:Object(I.a)(Object(I.a)({},F),{},{selected:n.selected})}))},ue=function(e){return{type:"CONFIGURATION_LOADING",payload:e}},se=function(e){return{type:"CONFIGURATION_SET",payload:{cloverDomain:e.cloverDomain,merchantId:e.merchantId,accessToken:e.accessToken,friendlyId:e.friendlyId,autoConnect:e.autoConnect}}},de=function(e){return{type:"DEVICES_SET_LIST",payload:e}},me=function(e){return{type:"DEVICES_SET_SELECTED",payload:e}},pe=function(e){var t=e.cloverDomain,n=e.merchantId,a=e.accessToken,r=e.friendlyId,c=e.autoConnect;return function(){var e=Object(q.a)(Y.a.mark((function e(o,i){var l;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o(ue(!0));case 3:return e.next=5,o(se({cloverDomain:t,merchantId:n,accessToken:a,friendlyId:r,autoConnect:c}));case 5:return le(i()),e.next=8,X({cloverDomain:t,merchantId:n,accessToken:a});case 8:return l=e.sent,e.next=11,o(de(l));case 11:if(l.length){e.next=13;break}throw new Error("Merchant has no devices.");case 13:if(l.some((function(e){return e.apps[g]}))){e.next=15;break}throw new Error("Merchant has no devices with Cloud Pay Display installed.");case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e.catch(0),e.next=21,o(ne(e.t0));case 21:return e.prev=21,e.next=24,o(ue(!1));case 24:return e.finish(21);case 25:case"end":return e.stop()}}),e,null,[[0,17,21,25]])})));return function(t,n){return e.apply(this,arguments)}}()},ve=n(261),fe=n(70),be=n(264),ye=n(263),Ee=function(e){return e.devices},Oe=Object(Z.a)(Ee,(function(e){return e.selected})),he=Object(Z.a)(Ee,Oe,(function(e,t){var n=e.list;return Object(D.a)(n).sort((function(e,n){return e.id===t?-1:n.id===t?1:0}))})),je=function(e){return{type:"CONNECTION_SET_CONNECTOR",payload:e}},ge=function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){var r,c,o,i,l,u,d,m,p,v,f;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:return t.next=5,n(me(e));case 5:if(r=a(),le(r),c=$(r),o=c.cloverDomain,i=c.merchantId,l=c.accessToken,u=c.friendlyId,d=he(r).find((function(t){return t.id===e}))){t.next=11;break}throw new Error("Device not found.");case 11:if(d.apps[g]){t.next=13;break}throw new Error("Device does not have Cloud Pay Display installed.");case 13:m=_.a.CloverConnectorFactoryBuilder.createICloverConnectorFactory(Object(s.a)({},_.a.CloverConnectorFactoryBuilder.FACTORY_VERSION,_.a.CloverConnectorFactoryBuilder.VERSION_12)),p=m.createICloverConnector(new _.a.WebSocketCloudCloverDeviceConfigurationBuilder("virtual-keypad",e,i,l).setCloverServer(o).setFriendlyId(u).build()),v=function(e){Object(be.a)(a,e);var t=Object(ye.a)(a);function a(){var e;return Object(ve.a)(this,a),e=t.call(this),Object.keys(Object.getPrototypeOf(Object.getPrototypeOf(Object(fe.a)(e)))).forEach((function(t){e[t]=function(e){return n({type:"@@connector/".concat(t),payload:e})}})),e}return a}(_.a.remotepay.ICloverConnectorListener),f=new v,p.addCloverConnectorListener(f),n(je(p)),n(oe("Connecting...")),p.initializeConnection(),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),n(ne(t.t0));case 26:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e,n){return t.apply(this,arguments)}}()},Ne=function(e){return{type:"TRANSACTION_SET_AMOUNT",payload:e}},ke=function(e){return{type:"TRANSACTION_SET_TYPE",payload:e}},Ce=function(){return function(){var e=Object(q.a)(Y.a.mark((function e(t,n){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ce(n()).dispose(),t(je()),t(de()),t({type:"TRANSACTION_RESET"})}catch(a){t(ne(a))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Te=function(e){return e.error},we=function(e){return e.buffer},Se=function(e){return{type:"BUFFER_APPEND",payload:e}},Ie=function(e){return{type:"TRANSACTIONS_UPDATE",payload:{id:e.id,type:e.type,amount:e.amount,tipAmount:e.tipAmount,payment:e.payment}}},De=Object(Z.a)((function(e){return e.transactions}),(function(e){return Object.values(e)})),Ae=Object(Z.a)(De,(function(e){return e.filter((function(e){return e.payment}))})),Re=Object(Z.a)(Ae,(function(e){return e.filter((function(e){return e.visible}))})),xe=function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){var r,c,o,i,l,u;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(h)})),r=a(),c=we(r),o=ce(r),n(ae()),n(oe("Processing...")),n({type:"BUFFER_RESET"}),i=+c){t.next=11;break}throw new Error("Amount is required");case 11:if(!isNaN(i)){t.next=13;break}throw new Error("Amount is invalid");case 13:if(!(i<=0||i>9999999)){t.next=15;break}throw new Error("Amount must between 0.01 and 99,999.99");case 15:n(ke(C)),n(Ne(i)),l=_.a.CloverID.getNewId(),(u=new _.a.remotepay.SaleRequest).setAmount(i),u.setExternalId(l),u.setCardEntryMethods(_.a.CardEntryMethods.DEFAULT|_.a.CardEntryMethods.CARD_ENTRY_METHOD_MANUAL),n(Ie({id:l,type:C,amount:i})),o.sale(u),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(0),n(ne(t.t0)),n({type:"@@connector/onDeviceReady"});case 30:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e,n){return t.apply(this,arguments)}}()},_e=function(e){return e.payment},Pe=(Object(Z.a)(_e,(function(e){return!!e.id})),Object(Z.a)(_e,(function(e){var t=e.card,n=t.first6,a=t.last4;return n&&a?[n,"*".repeat(6),a].join("").replace(/.{4}/g," $&").trim():""})),function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){var r,c,o,i,l,u,s,d;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(j)})),r=a(),c=_e(r),o=c.id,i=c.orderId,l=c.amount,u=c.tipAmount,s=ce(r),n(ae()),n(oe("Processing...")),o){t.next=9;break}throw new Error("No payment was specified");case 9:n(ke(T)),n(Ne((l||0)+(u||0))),(d=new _.a.remotepay.VoidPaymentRequest).setPaymentId(o),d.setOrderId(i),d.setVoidReason(_.a.order.VoidReason.USER_CANCEL),s.voidPayment(d),t.next=22;break;case 18:t.prev=18,t.t0=t.catch(0),n(ne(t.t0)),n({type:"@@connector/onDeviceReady"});case 22:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()});try{a=JSON.parse(localStorage.getItem("clover/virtual-keypad"))}catch(Nt){console.warn("Failed to initialize state from storage",Nt)}finally{a=a||void 0}var Fe=function(e){var t=Object(w.a)(S.a),n=window.__REDUX_DEVTOOLS_EXTENSION__,a=n?n():function(e){return e};return Object(w.e)(J,e,Object(w.d)(t,a))}(a),Me=Fe.getState();if(ee(Me)){var Ue=$(Me);Fe.dispatch(pe(Ue))}var Ve,Le=Fe,Be=n(14),Ye=function(e){return e.actions},qe=Object(Z.a)(Ye,(function(e){return e.find((function(e){return e.type===h}))})),Ge=Object(Z.a)(Ye,(function(e){var t=e.filter((function(e){return e.type!==h}));if(2===t.length){var n,a,r=Object(Be.a)(t,2),c=r[0],o=r[1];if("No"===(null===(n=c.payload)||void 0===n?void 0:n.description)&&"Yes"===(null===(a=o.payload)||void 0===a?void 0:a.description))return[o,c]}return t})),Ke=function(e){return e.signature},We=Object(Z.a)(Ke,(function(e){var t=e.strokes.map((function(e){return e.points})).flat().reduce((function(e,t){var n=e.x,a=e.X,r=e.y,c=e.Y;return{x:Math.min(n,t.x),X:Math.max(a,t.x),y:Math.min(r,t.y),Y:Math.max(c,t.y)}}),{x:1/0,X:-1/0,y:1/0,Y:-1/0});return[t.x,t.y,t.X-t.x,t.Y-t.y].join(" ")})),Xe=Object(Z.a)(Ke,(function(e){return e.strokes.map((function(e){return e.points.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join(" ")}))})),ze=function(e){return e.status},He=function(e){return e.transaction},Je=Object(Z.a)(He,(function(e){return e.amount||0})),Ze=Object(Z.a)(He,(function(e){return e.type})),$e=n(23),Qe=n.n($e),et=n(129),tt=n.n(et),nt=Object(Z.a)(ce,he,(function(e,t){return!e&&!t.length})),at=function(e){var t=e.size,n=void 0===t?28:t;return c.a.createElement("svg",{className:"Logo",id:"clover-logo-svg",xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 33.15 33.15","aria-labelledby":"svg-logo-title",role:"image"},c.a.createElement("title",{id:"svg-logo-title"},"Clover"),c.a.createElement("g",{id:"clover-symbol-2","data-name":"clover-symbol"},c.a.createElement("path",{d:"M191.45,85.64A7.5,7.5,0,1,0,184,93.09h7.49V85.64Z",transform:"translate(-176.46 -77.01)"}),c.a.createElement("path",{d:"M193.61,85.64a7.5,7.5,0,1,1,7.49,7.45h-7.49V85.64Z",transform:"translate(-176.46 -77.01)"}),c.a.createElement("path",{d:"M193.61,102.7a7.5,7.5,0,1,0,7.49-7.45h-7.49v7.45Z",transform:"translate(-176.46 -77.01)"}),c.a.createElement("path",{d:"M191.46,102.7A7.5,7.5,0,1,1,184,95.25h7.49v7.45Zm-7.5,5.35a5.38,5.38,0,0,0,5.4-5.35V97.36H184a5.35,5.35,0,1,0,0,10.7h0Z",transform:"translate(-176.46 -77.01)"})))},rt=function(e){var t=e.fill,n=e.size,a=void 0===n?20:n;return c.a.createElement("svg",{className:"Power",xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 501.672 501.672"},c.a.createElement("path",{d:"M476.836,275.667c0,124.608-101.381,226.005-225.995,226.005c-124.617,0-226.005-101.396-226.005-226.005 c0-92.843,58.241-177.615,144.907-210.942c14.446-5.538,30.657,1.646,36.212,16.093c5.551,14.443-1.655,30.653-16.093,36.208 C124.665,142.094,80.87,205.851,80.87,275.674c0,93.717,76.245,169.959,169.971,169.959c93.724,0,169.962-76.242,169.962-169.959 c0-68.086-40.482-129.433-103.095-156.268c-14.227-6.09-20.824-22.559-14.718-36.781c6.084-14.22,22.543-20.814,36.771-14.718 C423.024,103.576,476.836,185.128,476.836,275.667z M253.445,254.935c15.475,0,28.017-12.54,28.017-28.017V28.016 C281.462,12.542,268.92,0,253.445,0c-15.468,0-28.016,12.542-28.016,28.016v198.902 C225.429,242.396,237.982,254.935,253.445,254.935z",style:{fill:t}}))},ct=function(){var e=Object(l.b)(),t=Object(l.c)($),n=Object(l.c)(te),a=Object(l.c)(nt),o=tt.a.parse(window.location.search),i=tt.a.parse(window.location.hash),u=Object(r.useState)(t.cloverDomain||"https://www.clover.com"),s=Object(Be.a)(u,2),d=s[0],m=s[1],p=Object(r.useState)(o.merchant_id||t.merchantId),v=Object(Be.a)(p,2),f=v[0],b=v[1],y=Object(r.useState)(i.access_token||t.accessToken),E=Object(Be.a)(y,2),O=E[0],h=E[1],j=Object(r.useState)(t.friendlyId||"Virtual Keypad"),g=Object(Be.a)(j,2),N=g[0],k=g[1],C=Object(r.useState)(t.autoConnect||!1),T=Object(Be.a)(C,2),w=T[0],S=T[1],I=Object(r.useState)(!1),D=Object(Be.a)(I,2),A=D[0],R=D[1],x=Object(r.useMemo)((function(){return n||A}),[n,A]),_=Object(r.useCallback)(function(){var t=Object(q.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.preventDefault(),R(!0),t.next=5,e(pe({cloverDomain:d,merchantId:f,accessToken:O,friendlyId:N,autoConnect:w}));case 5:return t.prev=5,R(!1),t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[0,,5,8]])})));return function(e){return t.apply(this,arguments)}}(),[e,d,f,O,N,w]),P=Object(r.useCallback)((function(e){e.preventDefault(),m(t.cloverDomain),b(t.merchantId),h(t.accessToken),k(t.friendlyId),S(t.autoConnect)}),[t,m,b,h,k,S]);return a?c.a.createElement("form",{onSubmit:_,onReset:P},c.a.createElement("div",{className:"Configuration card"},c.a.createElement("div",{className:"card-header"},c.a.createElement(at,null),c.a.createElement("h3",null,"Virtual Keypad")),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Clover Domain:"),c.a.createElement("input",{type:"text",className:"form-control",value:d,onChange:function(e){return m(e.target.value)},disabled:x})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Merchant ID:"),c.a.createElement("input",{type:"text",className:"form-control",value:f,onChange:function(e){return b(e.target.value)},disabled:x})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Access Token:"),c.a.createElement("input",{type:"text",className:"form-control",value:O,onChange:function(e){return h(e.target.value)},disabled:x})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Friendly ID:"),c.a.createElement("input",{type:"text",className:"form-control",value:N,onChange:function(e){return k(e.target.value)},disabled:x})),c.a.createElement("div",{className:"form-group"},c.a.createElement("div",{className:"custom-control custom-switch"},c.a.createElement("input",{id:"chkAutoConnect",type:"checkbox",className:"custom-control-input",disabled:x,checked:w,onChange:function(){return S(!w)}}),c.a.createElement("label",{className:"custom-control-label font-weight-normal",htmlFor:"chkAutoConnect"},"Auto-connect")))),c.a.createElement("div",{className:"card-footer"},c.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:x},"Submit"),c.a.createElement("button",{type:"reset",className:"btn btn-secondary ml-2",disabled:x},"Reset")))):null},ot=Object(Z.a)(ce,he,(function(e,t){return!e&&!!t.length})),it=function(e){var t=e.device,n=e.active,a=e.disabled,r=e.onClick,o=t.apps[g],i=o?"Cloud Pay Display is installed":"Cloud Pay Display is NOT installed";return c.a.createElement("button",{key:t.id,type:"button",className:Qe()("list-group-item d-flex justify-content-between align-items-center list-group-item-action p-1",{disabled:a,"list-group-item-primary":!a&&n}),onClick:r},c.a.createElement("div",{className:"p-1"},t.name&&c.a.createElement("div",{className:"font-weight-bold"},t.name),t.productName," ",t.serial),c.a.createElement("span",{className:Qe()("badge p-1",{"badge-secondary":a,"badge-success":!a&&o,"badge-warning":!a&&!o}),role:"img","aria-label":i,title:i},"\u2601\ufe0f"))},lt=function(){var e=Object(l.b)(),t=Object(l.c)(he),n=Object(l.c)(Oe),a=Object(l.c)(ot),o=Object(r.useState)(),i=Object(Be.a)(o,2),u=i[0],s=i[1],d=Object(r.useCallback)((function(t){return function(){var n=Object(q.a)(Y.a.mark((function n(a){return Y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a.preventDefault(),s(!0),n.next=5,e(ge(t));case 5:return n.prev=5,s(!1),n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[0,,5,8]])})));return function(e){return n.apply(this,arguments)}}()}),[e]);return a?c.a.createElement("div",{className:"Devices card"},c.a.createElement("div",{className:"card-header"},c.a.createElement(at,null),c.a.createElement("h3",null,"Virtual Keypad"),c.a.createElement("button",{className:"close",title:"Cancel",onClick:function(){return e(de())},disabled:u},"\xd7")),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Select Device:"),c.a.createElement("div",{className:"list-group"},t.map((function(e){return c.a.createElement(it,{key:e.id,device:e,disabled:u,active:e.id===n,onClick:d(e.id)})})))))):null},ut=Object(Z.a)(ce,(function(e){return!!e})),st=n(584),dt=n(74),mt=function(e){var t=e.width,n=void 0===t?250:t,a=Object(dt.a)(e,["width"]),r=Object(l.c)(We),o=Object(l.c)(Xe);return o.length?c.a.createElement("div",{className:"Signature"},c.a.createElement("svg",Object.assign({viewBox:r,width:n},a),o.map((function(e,t){return c.a.createElement("polyline",{key:t,points:e,fill:"none",stroke:"black"})})))):null},pt=function(){var e=Object(l.c)(ze),t=Object(l.c)(we),n=Object(l.c)(Ze),a=Object(l.c)(Je);return c.a.createElement("div",{className:"Screen alert alert-secondary"},!!a&&c.a.createElement("div",{className:"Transaction d-flex justify-content-between bg-white rounded-top border-bottom border-secondary"},c.a.createElement("div",{className:"font-italic"},Object(st.a)(n)),c.a.createElement("div",{className:"font-weight-bold"},z(a))),!t&&c.a.createElement("div",null,e),c.a.createElement(mt,null),t&&c.a.createElement("div",{className:"text-muted"},t),t&&c.a.createElement("h3",{className:"text-right"},z(t)))},vt=n(262),ft=Object(r.forwardRef)((function(e,t){var n,a=e.action,o=e.height,i=e.color,l=e.keyCodes,u=e.disabled,s=e.onClick,d=e.moreActions,m=e.onMoreClick,p=e.children,v=Object(dt.a)(e,["action","height","color","keyCodes","disabled","onClick","moreActions","onMoreClick","children"]),f=Object(r.useState)(!1),b=Object(Be.a)(f,2),y=b[0],E=b[1];Object(r.useEffect)((function(){if(y){var e=function(){return E(!1)};return document.addEventListener("click",e),document.addEventListener("touch",e),document.addEventListener("keydown",e),function(){document.removeEventListener("click",e),document.removeEventListener("touch",e),document.removeEventListener("keydown",e)}}}),[y]),Object(r.useEffect)((function(){if(!u){var e=function(e){return!l.includes(e.code)||(e.preventDefault(),s(),!1)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}}),[u,l,s]);var O=a?Object(st.a)((null===(n=a.payload)||void 0===n?void 0:n.description)||(null===a||void 0===a?void 0:a.type)||""):p;return(null===d||void 0===d?void 0:d.length)?c.a.createElement("div",{className:"btn-group"},c.a.createElement("button",Object.assign({type:"button",className:"btn btn-dark action rounded-left",onClick:s,disabled:u},v,{title:"Shortcut keys: ".concat(l.join(", "))}),O||c.a.createElement("span",null,"\xa0")),c.a.createElement("button",{type:"button",className:"btn btn-dark action dropdown-toggle",onClick:function(){return E(!y)},disabled:u}),c.a.createElement("div",{className:Qe()("dropdown-menu bg-dark",{show:y})},d.map((function(e,t){var n;return c.a.createElement("button",{key:t,className:"dropdown-item bg-dark text-light",onClick:function(){return m(e)}},(null===(n=e.payload)||void 0===n?void 0:n.description)||e.type)})))):c.a.createElement("button",Object.assign({ref:t,type:"button",style:{height:o},className:Qe()("btn","text-".concat(i||"light"),{action:a,"btn-dark":a,"btn-outline-dark":!a}),disabled:u,onClick:s,title:"Shortcut keys: ".concat(l.join(", "))},v),O)})),bt=(Ve={},Object(s.a)(Ve,d,(function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(d)})),n(oe("Accepting payment...")),n(ae()),ce(a()).acceptPayment(e.payload.payment)}catch(Nt){n(ne(Nt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(s.a)(Ve,m,(function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){var r,c;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(m)})),n(oe("Accepting signature...")),n(ae()),n(ie()),r=ce(a()),(c=new _.a.remotepay.VerifySignatureRequest).setPayment(e.payload.payment),r.acceptSignature(c)}catch(Nt){n(ne(Nt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(s.a)(Ve,p,Ce),Object(s.a)(Ve,v,(function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){var r,c,o;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(v)})),n(oe("Identifying...")),n(ae([{type:O,payload:{description:"OK"}},{type:p,payload:{description:"Cancel"}}])),r=a(),c=ce(r),o=Q(r),c.showMessage("".concat(o," connected"))}catch(Nt){n(ne(Nt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(s.a)(Ve,f,(function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){var r,c;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(f)})),r=ce(a()),(c=new _.a.remotepay.InputOption).setDescription(e.payload.description),c.setKeyPress(e.payload.keyPress),r.invokeInputOption(c)}catch(Nt){n(ne(Nt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(s.a)(Ve,b,(function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(b)})),n(oe("Rejecting payment...")),n(ae()),ce(a()).rejectPayment(e.payload.payment,e.payload.challenges[0])}catch(Nt){n(ne(Nt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(s.a)(Ve,y,(function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){var r,c;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(y)})),n(oe("Rejecting signature...")),n(ae()),n(ie()),r=ce(a()),(c=new _.a.remotepay.VerifySignatureRequest).setPayment(e.payload.payment),r.rejectSignature(c)}catch(Nt){n(ne(Nt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(s.a)(Ve,E,(function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(E)})),n(oe("Resetting...")),n(ae()),ce(a()).resetDevice()}catch(Nt){n(ne(Nt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(s.a)(Ve,O,(function(e){return function(){var t=Object(q.a)(Y.a.mark((function t(n,a){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(I.a)(Object(I.a)({},e),{},{type:"@@action/".concat(O)})),n(oe("Ready")),n(ae([{type:v},{type:E},{type:h}])),ce(a()).showWelcomeScreen()}catch(Nt){n(ne(Nt))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(s.a)(Ve,h,xe),Ve),yt=function(){var e=Object(l.b)(),t=Object(l.c)(Ge),n=Object(l.c)(qe),a=Object(r.useState)(!1),o=Object(Be.a)(a,2),i=o[0],u=o[1],s=Object(r.useMemo)((function(){return!n||i}),[n,i]),d=Object(r.useCallback)(function(){var t=Object(q.a)(Y.a.mark((function t(n){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),n.type===f&&setTimeout((function(){return u(!1)}),250),t.next=4,e(bt[n.type](n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[e,u]),m=function(e){return Object(q.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d(e));case 1:case"end":return t.stop()}}),t)})))};Object(r.useEffect)((function(){t.length&&u(!1)}),[u,t]);var p=Object(r.useRef)(),v=Object(r.useState)(),b=Object(Be.a)(v,2),y=b[0],E=b[1];Object(r.useEffect)((function(){p.current&&E(p.current.offsetWidth)}),[p,E]);var O=Object(vt.a)(t),h=O[0],j=O[1],g=O.slice(2);return c.a.createElement("div",{className:"Keys"},c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-6 p-1"},c.a.createElement(ft,{action:h||{},disabled:!h||i,keyCodes:["F1","NumpadDivide"],onClick:m(h)})),c.a.createElement("div",{className:"col-6 p-1"},c.a.createElement(ft,{action:j||{},disabled:!j||i,keyCodes:["F2","NumpadMultiply"],onClick:m(j),moreActions:g,onMoreClick:function(e){return d(e)}}))),c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(ft,{ref:p,height:y,disabled:s,keyCodes:["Numpad7","Digit7"],onClick:function(){return e(Se("7"))}},"7")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(ft,{disabled:s,keyCodes:["Numpad8","Digit8"],onClick:function(){return e(Se("8"))}},"8")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(ft,{disabled:s,keyCodes:["Numpad9","Digit9"],onClick:function(){return e(Se("9"))}},"9")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(ft,{color:"danger",disabled:s,keyCodes:["NumpadSubtract","Escape"],onClick:function(){return e({type:"BUFFER_RESET"})}},"X"))),c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(ft,{height:y,disabled:s,keyCodes:["Numpad4","Digit4"],onClick:function(){return e(Se("4"))}},"4")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(ft,{disabled:s,keyCodes:["Numpad5","Digit5"],onClick:function(){return e(Se("5"))}},"5")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(ft,{disabled:s,keyCodes:["Numpad6","Digit6"],onClick:function(){return e(Se("6"))}},"6")),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(ft,{color:"warning",disabled:s,keyCodes:["NumpadAdd","Backspace","Delete"],onClick:function(){return e({type:"BUFFER_UNDO"})}},"<"))),c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-9"},c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-4 p-1"},c.a.createElement(ft,{height:y,disabled:s,keyCodes:["Numpad1","Digit1"],onClick:function(){return e(Se("1"))}},"1")),c.a.createElement("div",{className:"col-4 p-1"},c.a.createElement(ft,{disabled:s,keyCodes:["Numpad2","Digit2"],onClick:function(){return e(Se("2"))}},"2")),c.a.createElement("div",{className:"col-4 p-1"},c.a.createElement(ft,{disabled:s,keyCodes:["Numpad3","Digit3"],onClick:function(){return e(Se("3"))}},"3"))),c.a.createElement("div",{className:"row no-gutters"},c.a.createElement("div",{className:"col-8 p-1"},c.a.createElement(ft,{height:y,disabled:s,keyCodes:["Numpad0","Digit0"],onClick:function(){return e(Se("0"))}},"0")),c.a.createElement("div",{className:"col-4 p-1"},c.a.createElement(ft,{disabled:s,keyCodes:["NumpadDecimal","Period"],onClick:function(){return e(Se("00"))}},"00")))),c.a.createElement("div",{className:"col-3 p-1"},c.a.createElement(ft,{color:"success",disabled:s,keyCodes:["NumpadEnter","Enter"],onClick:function(){return e(xe())}},"O"))))},Et=(n(581),function(){var e=Object(l.b)(),t=Object(l.c)(ut),n=Object(r.useCallback)((function(){return e(Ce())}),[e]);return t?c.a.createElement("div",{className:"Keypad card"},c.a.createElement("div",{className:"card-header"},c.a.createElement(at,null),c.a.createElement("h3",null,"Virtual Keypad"),c.a.createElement("button",{className:"btn btn-sm btn-outline-dark",onClick:n,title:"Disconnect"},c.a.createElement(rt,null))),c.a.createElement("div",{className:"card-body"},c.a.createElement(pt,null),c.a.createElement(yt,null))):null}),Ot=function(e){var t=e.error,n=t.message,a=t.stack,o=Object(r.useState)(!1),i=Object(Be.a)(o,2),l=i[0],u=i[1];return Object(r.useEffect)((function(){return function(){document.querySelectorAll(".Error.expanded").length-(l?1:0)||document.querySelector(".react-toast-notifications__container").classList.remove("expanded")}}),[l]),c.a.createElement("div",{className:Qe()("Error",{expanded:l})},c.a.createElement("h5",null,n),!!a&&!l&&c.a.createElement("button",{className:"btn btn-link btn-sm",onClick:function(){document.querySelector(".react-toast-notifications__container").classList.add("expanded"),u(!0)}},"Show details..."),!!a&&l&&c.a.createElement("pre",{className:"mb-0"},c.a.createElement("code",null,a)))},ht=function(e){var t=e.amount,n=e.tipAmount,a=e.payment,r=(t||0)+(n||0),c=((null===a||void 0===a?void 0:a.amount)||0)+((null===a||void 0===a?void 0:a.tipAmount)||0);return{start:r,final:c,partial:r>c,remaining:r-c}},jt=function(e){var t=e.transaction,n=t||{},a=n.type,r=n.payment,o=Object(l.b)(),i=Object(u.useToasts)().removeToast,s=ht(t),d=function(){var e=Object(q.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({type:"BUFFER_SET",payload:s.remaining||""});case 3:return e.next=5,o(xe());case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,o(ne(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(q.a)(Y.a.mark((function e(){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i(t.id),e.next=4,o(Pe(r));case 4:e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,o(ne(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{className:"Transaction"},t.type!==T&&s.partial&&c.a.createElement("div",{className:"alert alert-warning"},c.a.createElement("h6",{className:"alert-heading"},"Partial Payment"),c.a.createElement("div",null,"Remaining: ",z(s.remaining))),c.a.createElement("h5",null,Object(st.a)(a||"Transaction")," Details"),c.a.createElement("table",{className:"table table-sm small mb-0"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Payment ID:"),c.a.createElement("td",null,r.id)),c.a.createElement("tr",null,c.a.createElement("th",null,"External ID:"),c.a.createElement("td",null,r.externalPaymentId)),c.a.createElement("tr",null,c.a.createElement("th",null,"Order ID:"),c.a.createElement("td",null,r.order.id)),!!r.tipAmount&&c.a.createElement("tr",null,c.a.createElement("th",null,"Total:"),c.a.createElement("td",null,z(r.amount+r.tipAmount))),c.a.createElement("tr",null,c.a.createElement("th",null,"Amount:"),c.a.createElement("td",null,z(r.amount))),!!r.tipAmount&&c.a.createElement("tr",null,c.a.createElement("th",null,"Tip:"),c.a.createElement("td",null,z(r.tipAmount))),c.a.createElement("tr",null,c.a.createElement("th",null,"Card:"),c.a.createElement("td",null,c.a.createElement("div",null,r.cardType),c.a.createElement("div",null,function(e){var t=e.first6,n=e.last4;return[t,"*".repeat(6),n].join("").replace(/.{4}/g," $&").trim()}(r.cardTransaction)),r.cardTransaction.cardholderName&&c.a.createElement("div",null,r.cardTransaction.cardholderName))))),t.type===C&&c.a.createElement("div",null,s.partial&&c.a.createElement("button",{className:"btn btn-primary btn-sm mr-1",onClick:d},"Process ",z(s.remaining)),c.a.createElement("button",{key:"void",className:"btn btn-danger btn-sm",onClick:m},"Void")))},gt=(n(582),function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ms,n=void 0===t?500:t;Object(r.useEffect)((function(){var e=0,t=function(t){if(1===t.touches.length){var a=Date.now();1===t.touches.length&&a>e&&(t.preventDefault(),t.target.click()),e=a+n}};return document.body.addEventListener("touchstart",t,{passive:!1}),function(){return document.body.removeEventListener("touchstart",t,{passive:!1})}}),[n])}(),function(){var e=Object(l.b)(),t=Object(l.c)(Te),n=Object(u.useToasts)().addToast;Object(r.useEffect)((function(){t.message&&n(c.a.createElement(Ot,{error:t}),{appearance:"error",autoDismiss:!0,onDismiss:function(){e(ne())}})}),[n,e,t])}(),function(){var e=Object(l.b)(),t=Object(l.c)(Re),n=Object(u.useToasts)().addToast;Object(r.useEffect)((function(){t.forEach((function(t){var a,r=ht(t);a=t.type===T?"info":r.final>=r.start?"success":r.final<r.start?"warning":"info",n(c.a.createElement(jt,{transaction:t}),{id:t.id,appearance:a,autoDismiss:!1,onDismiss:function(){e({type:"TRANSACTIONS_HIDE",payload:t.id})}})}))}),[n,e,t])}(),c.a.createElement("div",{className:Qe()("App container maxwidth")},c.a.createElement(ct,null),c.a.createElement(lt,null),c.a.createElement(Et,null))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(l.a,{store:Le},c.a.createElement(u.ToastProvider,{placement:"bottom-right"},c.a.createElement(gt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[266,1,2]]]);
//# sourceMappingURL=main.1f4eb9b3.chunk.js.map