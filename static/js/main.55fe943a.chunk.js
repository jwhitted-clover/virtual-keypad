(this["webpackJsonpvirtual-keypad"]=this["webpackJsonpvirtual-keypad"]||[]).push([[0],{252:function(e,t,n){e.exports=n(556)},552:function(e,t,n){},553:function(e,t,n){},554:function(e,t,n){},555:function(e,t,n){},556:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(64),l=n.n(o),i=n(6),u=n(12),s="ACCEPT_PAYMENT",d="ACCEPT_SIGNATURE",m="DISCONNECT",p="IDENTIFY",v="INVOKE_INPUT_OPTION",f="REJECT_PAYMENT",y="REJECT_SIGNATURE",b="RESET",E="SHOW_WELCOME",O="TRANSACTION",h="CLOUD_PAY_DISPLAY",j=Object(u.a)({},h,"Cloud Pay Display"),g=Object.fromEntries(Object.entries(j).map((function(e){return e.reverse()}))),k="SALE",N=n(23),C=n(246),T=n(3),w=n(69),S=[],I={cloverDomain:"",merchantId:"",accessToken:"",friendlyId:""},D=n(13),R=n.n(D),A={connector:null,connected:!1},x={list:[],selected:""},_={message:null,stack:null},P={id:"",externalId:"",orderId:"",amount:0,tipAmount:0,card:{type:"",first6:"",last4:"",name:""}},F={width:0,height:0,strokes:[]},M={amount:0,type:""},U=n(4),V=n.n(U),L=n(7),B=function(e){var t=e.cloverDomain,n=e.merchantId,a=e.deviceId,r=e.accessToken;return fetch(new URL("/v2/merchant/".concat(n,"/device/").concat(a,"/current_apps?access_token=").concat(r),t).toString(),{method:"GET",headers:{accept:"application/json","content-type":"application/json"}}).then((function(e){return e.json()}))},Y=function(e){var t=e.cloverDomain,n=e.merchantId,a=e.accessToken;return fetch(new URL("/v3/merchants/".concat(n,"/devices?access_token=").concat(a),t).toString(),{method:"GET",headers:{accept:"application/json","content-type":"application/json"}}).then((function(e){return e.json()}))},q=function(e,t){var n=g[t.appName];return n?Object(T.a)(Object(T.a)({},e),{},Object(u.a)({},n,!0)):e},K=function(){var e=Object(L.a)(V.a.mark((function e(t){var n,a,r,c,o,l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cloverDomain,a=t.merchantId,r=t.accessToken,e.next=3,Y({cloverDomain:n,merchantId:a,accessToken:r});case 3:return c=e.sent,o=c.elements,e.next=7,Promise.all(o.map((function(e){var t=e.id;return B({cloverDomain:n,merchantId:a,accessToken:r,deviceId:t})})));case 7:return l=e.sent,e.abrupt("return",o.map((function(e,t){return Object(T.a)(Object(T.a)({},e),{},{apps:l[t].applications.reduce(q,{})})})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(e){var t=+e;return!isNaN(t)&&t>=0?(t/100).toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}):""},X=Object(N.c)({actions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"ACTIONS_APPEND":var r=e.some((function(e){var t,n;return e.type===a.type&&(null===(t=e.payload)||void 0===t?void 0:t.description)===(null===(n=a.payload)||void 0===n?void 0:n.description)}));return r?e:[].concat(Object(w.a)(e),[a]);case"ACTIONS_SET":return a||[];case"@@connector/onDeviceReady":case"@@connector/onResetDeviceResponse":return[{type:p},{type:b},{type:O}];case"@@connector/onDeviceActivityStart":return a.inputOptions.map((function(e){return{type:v,payload:e}}));case"@@connector/onSaleResponse":return[{type:p},{type:b},{type:O}];case"@@connector/onConfirmPaymentRequest":return[{type:s,payload:Object(T.a)({description:"Accept"},a)},{type:f,payload:Object(T.a)({description:"Reject"},a)}];case"@@connector/onVerifySignatureRequest":return[{type:d,payload:Object(T.a)({description:"Accept"},a)},{type:y,payload:Object(T.a)({description:"Reject"},a)}];default:return e}},buffer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"BUFFER_RESET":return"";case"BUFFER_APPEND":return(e+a).replace(/^0+/,"").slice(0,7);case"BUFFER_SET":return a;case"BUFFER_UNDO":return e.length?e.slice(0,e.length-1):"";default:return e}},configuration:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"CONFIGURATION_SET":return{cloverDomain:a.cloverDomain||"",merchantId:a.merchantId||"",accessToken:a.accessToken||"",friendlyId:a.friendlyId||""};default:return e}},connection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"CONNECTION_SET_CONNECTOR":try{(null===e||void 0===e?void 0:e.connector)&&e.connector.dispose()}catch(c){}return Object(T.a)(Object(T.a)({},e),{},{connector:a,connected:!1});case"@@connector/onDeviceDisconnected":return Object(T.a)(Object(T.a)({},e),{},{connected:!1});case"@@connector/onDeviceReady":var r=new R.a.remotepay.RetrieveDeviceStatusRequest;return r.setSendLastMessage(!0),e.connector.retrieveDeviceStatus(r),Object(T.a)(Object(T.a)({},e),{},{connected:!0});default:return e}},devices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"DEVICES_SET_SELECTED":return Object(T.a)(Object(T.a)({},e),{},{selected:a||""});case"DEVICES_SET_LIST":return Object(T.a)(Object(T.a)({},e),{},{list:a||[]});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"ERROR_SET":return Object(T.a)(Object(T.a)({},e),{},{message:a.message,stack:a.stack});case"@@connector/onDeviceError":return Object(T.a)(Object(T.a)({},e),{},{message:"Device Error ".concat(a.message),stack:null});default:return e}},payment:function(){var e,t,n,a,r,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,o=arguments.length>1?arguments[1]:void 0,l=o.type,i=o.payload;switch(l){case"PAYMENT_SET":return{id:(null===i||void 0===i?void 0:i.id)||"",externalId:(null===i||void 0===i?void 0:i.externalPaymentId)||"",orderId:(null===i||void 0===i||null===(e=i.order)||void 0===e?void 0:e.id)||"",amount:(null===i||void 0===i?void 0:i.amount)||0,tipAmount:(null===i||void 0===i?void 0:i.tipAmount)||0,card:{type:(null===i||void 0===i||null===(t=i.cardTransaction)||void 0===t?void 0:t.cardType)||"",first6:(null===i||void 0===i||null===(n=i.cardTransaction)||void 0===n?void 0:n.first6)||"",last4:(null===i||void 0===i||null===(a=i.cardTransaction)||void 0===a?void 0:a.last4)||"",name:(null===i||void 0===i||null===(r=i.cardTransaction)||void 0===r?void 0:r.cardholderName)||""}};case"@@connector/onSaleResponse":var u,s,d,m,p,v,f,y,b,E,O,h,j,g;return i.success?{id:(null===i||void 0===i||null===(u=i.payment)||void 0===u?void 0:u.id)||"",externalId:(null===i||void 0===i||null===(s=i.payment)||void 0===s?void 0:s.externalPaymentId)||"",orderId:(null===i||void 0===i||null===(d=i.payment)||void 0===d||null===(m=d.order)||void 0===m?void 0:m.id)||"",amount:(null===i||void 0===i||null===(p=i.payment)||void 0===p?void 0:p.amount)||0,tipAmount:(null===i||void 0===i||null===(v=i.payment)||void 0===v?void 0:v.tipAmount)||0,card:{type:(null===i||void 0===i||null===(f=i.payment)||void 0===f||null===(y=f.cardTransaction)||void 0===y?void 0:y.cardType)||"",first6:(null===i||void 0===i||null===(b=i.payment)||void 0===b||null===(E=b.cardTransaction)||void 0===E?void 0:E.first6)||"",last4:(null===i||void 0===i||null===(O=i.payment)||void 0===O||null===(h=O.cardTransaction)||void 0===h?void 0:h.last4)||"",name:(null===i||void 0===i||null===(j=i.payment)||void 0===j||null===(g=j.cardTransaction)||void 0===g?void 0:g.cardholderName)||""}}:P;case"@@connector/onResetDeviceResponse":return P;default:return c}},signature:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SIGNATURE_SET":return{width:(null===a||void 0===a?void 0:a.width)||0,height:(null===a||void 0===a?void 0:a.height)||0,strokes:(null===a||void 0===a?void 0:a.strokes)||[]};case"@@connector/onVerifySignatureRequest":return{width:a.signature.width,height:a.signature.height,strokes:a.signature.strokes};default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"STATUS_SET":return a||"";case"@@connector/onDeviceReady":case"@@connector/onResetDeviceResponse":return"Ready";case"@@connector/onDeviceActivityStart":return a.message;case"@@connector/onSaleResponse":return"Ready";case"@@connector/onConfirmPaymentRequest":return a.challenges[0].message;case"@@connector/onVerifySignatureRequest":return"Verify Signature";default:return e}},transaction:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"TRANSACTION_ADD_AMOUNT":return Object(T.a)(Object(T.a)({},e),{},{amount:e.amount+a});case"TRANSACTION_SET_AMOUNT":return Object(T.a)(Object(T.a)({},e),{},{amount:a});case"TRANSACTION_SET_TYPE":return Object(T.a)(Object(T.a)({},e),{},{type:a});case"TRANSACTION_RESET":return M;case"@@connector/onTipAdded":return Object(T.a)(Object(T.a)({},e),{},{amount:e.amount+a.tipAmount});case"@@connector/onSaleResponse":case"@@connector/onResetDeviceResponse":case"@@action/".concat(O):return M;default:return e}}});try{a=JSON.parse(localStorage.getItem("clover/virtual-keypad"))}catch(ct){console.warn("Failed to initialize state from storage",ct)}finally{a=a||void 0}var z,J=function(e){var t=Object(N.a)(C.a),n=window.__REDUX_DEVTOOLS_EXTENSION__,a=n?n():function(e){return e};return Object(N.e)(X,e,Object(N.d)(t,a))}(a),W=function(e){return{type:"ACTIONS_SET",payload:e}},Z=n(9),$=function(e){return e.actions},H=Object(Z.a)($,(function(e){return e.find((function(e){return e.type===O}))})),Q=Object(Z.a)($,(function(e){return e.filter((function(e){return e.type!==O}))})),ee=function(e){return{type:"BUFFER_APPEND",payload:e}},te=function(e){return e.buffer},ne=function(e){return{type:"CONFIGURATION_SET",payload:{cloverDomain:e.cloverDomain,merchantId:e.merchantId,accessToken:e.accessToken,friendlyId:e.friendlyId}}},ae=function(e){return e.configuration},re=Object(Z.a)(ae,(function(e){return e.friendlyId||"Virtual Keypad"})),ce=function(e){return{type:"CONNECTION_SET_CONNECTOR",payload:e}},oe=function(e){return e.connection},le=Object(Z.a)(oe,(function(e){return e.connector})),ie=(Object(Z.a)(oe,(function(e){return e.connected})),function(e){return{type:"DEVICES_SET_LIST",payload:e}}),ue=function(e){return{type:"DEVICES_SET_SELECTED",payload:e}},se=function(e){return e.devices},de=Object(Z.a)(se,(function(e){return e.selected})),me=Object(Z.a)(se,de,(function(e,t){var n=e.list;return Object(w.a)(n).sort((function(e,n){return e.id===t?-1:n.id===t?1:0}))})),pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=e.stack;return{type:"ERROR_SET",payload:{message:t,stack:n}}},ve=function(e){return e.error},fe=function(e){return e.payment},ye=(Object(Z.a)(fe,(function(e){return!!e.id})),Object(Z.a)(fe,(function(e){var t=e.card,n=t.first6,a=t.last4;return n&&a?[n,"*".repeat(6),a].join("").replace(/.{4}/g," $&").trim():""})),function(e){return{type:"SIGNATURE_SET",payload:e}}),be=function(e){return e.signature},Ee=Object(Z.a)(be,(function(e){var t=e.strokes.map((function(e){return e.points})).flat().reduce((function(e,t){var n=e.x,a=e.X,r=e.y,c=e.Y;return{x:Math.min(n,t.x),X:Math.max(a,t.x),y:Math.min(r,t.y),Y:Math.max(c,t.y)}}),{x:1/0,X:-1/0,y:1/0,Y:-1/0});return[t.x,t.y,t.X-t.x,t.Y-t.y].join(" ")})),Oe=Object(Z.a)(be,(function(e){return e.strokes.map((function(e){return e.points.map((function(e){var t=e.x,n=e.y;return"".concat(t,",").concat(n)})).join(" ")}))})),he=function(e){return{type:"STATUS_SET",payload:e}},je=function(e){return e.status},ge=function(e){var t=e.configuration,n=e.devices;return localStorage.setItem("clover/virtual-keypad",JSON.stringify({configuration:t,devices:Object(T.a)(Object(T.a)({},x),{},{selected:n.selected})}))},ke=function(e){var t=e.cloverDomain,n=e.merchantId,a=e.accessToken,r=e.friendlyId;return function(){var e=Object(L.a)(V.a.mark((function e(c,o){var l;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c(ne({cloverDomain:t,merchantId:n,accessToken:a,friendlyId:r}));case 3:return ge(o()),e.next=6,K({cloverDomain:t,merchantId:n,accessToken:a});case 6:return l=e.sent,e.next=9,c(ie(l));case 9:if(l.length){e.next=11;break}throw new Error("Merchant has no devices.");case 11:if(l.some((function(e){return e.apps[h]}))){e.next=13;break}throw new Error("Merchant has no devices with Cloud Pay Display installed.");case 13:e.next=19;break;case 15:return e.prev=15,e.t0=e.catch(0),e.next=19,c(pe(e.t0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,n){return e.apply(this,arguments)}}()},Ne=n(247),Ce=n(66),Te=n(250),we=n(249),Se=function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){var r,c,o,l,i,s,d,m,p,v,f;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,new Promise((function(e){return setTimeout(e,1e3)}));case 3:return t.next=5,n(ue(e));case 5:if(r=a(),ge(r),c=ae(r),o=c.cloverDomain,l=c.merchantId,i=c.accessToken,s=c.friendlyId,d=me(r).find((function(t){return t.id===e}))){t.next=11;break}throw new Error("Device not found.");case 11:if(d.apps[h]){t.next=13;break}throw new Error("Device does not have Cloud Pay Display installed.");case 13:m=R.a.CloverConnectorFactoryBuilder.createICloverConnectorFactory(Object(u.a)({},R.a.CloverConnectorFactoryBuilder.FACTORY_VERSION,R.a.CloverConnectorFactoryBuilder.VERSION_12)),p=m.createICloverConnector(new R.a.WebSocketCloudCloverDeviceConfigurationBuilder("virtual-keypad",e,l,i).setCloverServer(o).setFriendlyId(s).build()),v=function(e){Object(Te.a)(a,e);var t=Object(we.a)(a);function a(){var e;return Object(Ne.a)(this,a),e=t.call(this),Object.keys(Object.getPrototypeOf(Object.getPrototypeOf(Object(Ce.a)(e)))).forEach((function(t){e[t]=function(e){return n({type:"@@connector/".concat(t),payload:e})}})),e}return a}(R.a.remotepay.ICloverConnectorListener),f=new v,p.addCloverConnectorListener(f),n(ce(p)),n(he("Connecting...")),p.initializeConnection(),t.next=26;break;case 23:t.prev=23,t.t0=t.catch(0),n(pe(t.t0));case 26:case"end":return t.stop()}}),t,null,[[0,23]])})));return function(e,n){return t.apply(this,arguments)}}()},Ie=function(e){return{type:"TRANSACTION_SET_AMOUNT",payload:e}},De=function(){return function(){var e=Object(L.a)(V.a.mark((function e(t,n){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{le(n()).dispose(),t(ce()),t(ie()),t({type:"TRANSACTION_RESET"})}catch(ct){t(pe(ct))}case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Re=function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){var r,c,o,l,i;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n(Object(T.a)(Object(T.a)({},e),{},{type:"@@action/".concat(O)})),r=a(),c=te(r),o=le(r),n(W()),n(he("Processing...")),n({type:"BUFFER_RESET"}),l=+c){t.next=11;break}throw new Error("Amount is required");case 11:if(!isNaN(l)){t.next=13;break}throw new Error("Amount is invalid");case 13:if(!(l<0||l>9999999)){t.next=15;break}throw new Error("Amount must between 0.00 and 99,999.99");case 15:n({type:"TRANSACTION_SET_TYPE",payload:k}),n(Ie(l)),(i=new R.a.remotepay.SaleRequest).setAmount(l),i.setExternalId(R.a.CloverID.getNewId()),i.setCardEntryMethods(R.a.CardEntryMethods.DEFAULT),o.sale(i),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(0),n(pe(t.t0)),n({type:"@@connector/onDeviceReady"});case 28:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(e,n){return t.apply(this,arguments)}}()},Ae=function(e){return e.transaction},xe=Object(Z.a)(Ae,(function(e){return e.amount||0})),_e=Object(Z.a)(Ae,(function(e){return e.type})),Pe=n(18),Fe=Object(Z.a)(le,me,(function(e,t){return!e&&!t.length})),Me=function(e){var t=e.size,n=void 0===t?28:t;return c.a.createElement("svg",{className:"Logo",id:"clover-logo-svg",xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 33.15 33.15","aria-labelledby":"svg-logo-title",role:"image"},c.a.createElement("title",{id:"svg-logo-title"},"Clover"),c.a.createElement("g",{id:"clover-symbol-2","data-name":"clover-symbol"},c.a.createElement("path",{d:"M191.45,85.64A7.5,7.5,0,1,0,184,93.09h7.49V85.64Z",transform:"translate(-176.46 -77.01)"}),c.a.createElement("path",{d:"M193.61,85.64a7.5,7.5,0,1,1,7.49,7.45h-7.49V85.64Z",transform:"translate(-176.46 -77.01)"}),c.a.createElement("path",{d:"M193.61,102.7a7.5,7.5,0,1,0,7.49-7.45h-7.49v7.45Z",transform:"translate(-176.46 -77.01)"}),c.a.createElement("path",{d:"M191.46,102.7A7.5,7.5,0,1,1,184,95.25h7.49v7.45Zm-7.5,5.35a5.38,5.38,0,0,0,5.4-5.35V97.36H184a5.35,5.35,0,1,0,0,10.7h0Z",transform:"translate(-176.46 -77.01)"})))},Ue=function(e){var t=e.fill,n=e.size,a=void 0===n?20:n;return c.a.createElement("svg",{className:"Power",xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 501.672 501.672"},c.a.createElement("path",{d:"M476.836,275.667c0,124.608-101.381,226.005-225.995,226.005c-124.617,0-226.005-101.396-226.005-226.005 c0-92.843,58.241-177.615,144.907-210.942c14.446-5.538,30.657,1.646,36.212,16.093c5.551,14.443-1.655,30.653-16.093,36.208 C124.665,142.094,80.87,205.851,80.87,275.674c0,93.717,76.245,169.959,169.971,169.959c93.724,0,169.962-76.242,169.962-169.959 c0-68.086-40.482-129.433-103.095-156.268c-14.227-6.09-20.824-22.559-14.718-36.781c6.084-14.22,22.543-20.814,36.771-14.718 C423.024,103.576,476.836,185.128,476.836,275.667z M253.445,254.935c15.475,0,28.017-12.54,28.017-28.017V28.016 C281.462,12.542,268.92,0,253.445,0c-15.468,0-28.016,12.542-28.016,28.016v198.902 C225.429,242.396,237.982,254.935,253.445,254.935z",style:{fill:t}}))},Ve=function(){var e=Object(i.b)(),t=Object(i.c)(ae),n=Object(i.c)(Fe),a=Object(r.useState)(t.cloverDomain),o=Object(Pe.a)(a,2),l=o[0],u=o[1],s=Object(r.useState)(t.merchantId),d=Object(Pe.a)(s,2),m=d[0],p=d[1],v=Object(r.useState)(t.accessToken),f=Object(Pe.a)(v,2),y=f[0],b=f[1],E=Object(r.useState)(t.friendlyId),O=Object(Pe.a)(E,2),h=O[0],j=O[1],g=Object(r.useState)(),k=Object(Pe.a)(g,2),N=k[0],C=k[1],T=Object(r.useCallback)(function(){var t=Object(L.a)(V.a.mark((function t(n){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.preventDefault(),C(!0),t.next=5,e(ke({cloverDomain:l,merchantId:m,accessToken:y,friendlyId:h}));case 5:return t.prev=5,C(!1),t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[0,,5,8]])})));return function(e){return t.apply(this,arguments)}}(),[e,l,m,y,h]),w=Object(r.useCallback)((function(e){e.preventDefault(),u(t.cloverDomain),p(t.merchantId),b(t.accessToken),j(t.friendlyId)}),[t,u,p,b,j]);return n?c.a.createElement("form",{onSubmit:T,onReset:w},c.a.createElement("div",{className:"Configuration card"},c.a.createElement("div",{className:"card-header"},c.a.createElement(Me,null),c.a.createElement("h3",null,"Virtual Keypad")),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Clover Domain:"),c.a.createElement("input",{type:"text",className:"form-control",value:l,onChange:function(e){return u(e.target.value)},disabled:N})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Merchant ID:"),c.a.createElement("input",{type:"text",className:"form-control",value:m,onChange:function(e){return p(e.target.value)},disabled:N})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Access Token:"),c.a.createElement("input",{type:"text",className:"form-control",value:y,onChange:function(e){return b(e.target.value)},disabled:N})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Friendly ID:"),c.a.createElement("input",{type:"text",className:"form-control",value:h,onChange:function(e){return j(e.target.value)},disabled:N}))),c.a.createElement("div",{className:"card-footer"},c.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:N},"Submit"),c.a.createElement("button",{type:"reset",className:"btn btn-secondary ml-2",disabled:N},"Reset")))):null},Le=Object(Z.a)(le,me,(function(e,t){return!e&&!!t.length})),Be=n(43),Ye=n.n(Be),qe=function(e){var t=e.device,n=e.active,a=e.disabled,r=e.onClick,o=t.apps[h],l=o?"Cloud Pay Display is installed":"Cloud Pay Display is NOT installed";return c.a.createElement("button",{key:t.id,type:"button",className:Ye()("list-group-item d-flex justify-content-between align-items-center list-group-item-action p-1",{disabled:a,"list-group-item-primary":n}),onClick:r},c.a.createElement("div",{className:"p-1"},t.name&&c.a.createElement("div",{className:"font-weight-bold"},t.name),t.productName," ",t.serial),c.a.createElement("span",{className:Ye()("badge p-1",{"badge-success":o,"badge-warning":!o}),role:"img","aria-label":l,title:l},"\u2601\ufe0f"))},Ke=function(){var e=Object(i.b)(),t=Object(i.c)(me),n=Object(i.c)(de),a=Object(i.c)(Le),o=Object(r.useState)(),l=Object(Pe.a)(o,2),u=l[0],s=l[1],d=Object(r.useCallback)((function(t){return function(){var n=Object(L.a)(V.a.mark((function n(a){return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a.preventDefault(),s(!0),n.next=5,e(Se(t));case 5:return n.prev=5,s(!1),n.finish(5);case 8:case"end":return n.stop()}}),n,null,[[0,,5,8]])})));return function(e){return n.apply(this,arguments)}}()}),[e]);return a?c.a.createElement("div",{className:"Devices card"},c.a.createElement("div",{className:"card-header"},c.a.createElement(Me,null),c.a.createElement("h3",null,"Virtual Keypad")),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"Select Device:"),c.a.createElement("div",{className:"list-group"},t.map((function(e){return c.a.createElement(qe,{key:e.id,device:e,disabled:u,active:e.id===n,onClick:d(e.id)})})))))):null},Ge=Object(Z.a)(ve,(function(e){return!!e.message})),Xe=(n(552),function(){var e=Object(i.b)(),t=Object(i.c)(ve),n=Object(i.c)(Ge),a=Object(r.useState)(!1),o=Object(Pe.a)(a,2),l=o[0],u=o[1],s=Object(r.useCallback)((function(){return e(pe())}),[e]);return n?c.a.createElement("div",{className:"Error alert alert-danger"},c.a.createElement("button",{type:"button",className:"close",onClick:s},"\xd7"),c.a.createElement("h3",{className:"alert-heading"},t.message),!!t.stack&&!l&&c.a.createElement("button",{type:"button",className:"btn btn-link btn-sm text-danger",onClick:function(){return u(!0)}},"Show details\u2026"),!!t.stack&&l&&c.a.createElement("pre",null,c.a.createElement("code",null,null===t||void 0===t?void 0:t.stack))):null}),ze=Object(Z.a)(le,(function(e){return!!e})),Je=n(557),We=n(70),Ze=function(e){var t=e.width,n=void 0===t?250:t,a=Object(We.a)(e,["width"]),r=Object(i.c)(Ee),o=Object(i.c)(Oe);return o.length?c.a.createElement("div",{className:"Signature"},c.a.createElement("svg",Object.assign({viewBox:r,width:n},a),o.map((function(e,t){return c.a.createElement("polyline",{key:t,points:e,fill:"none",stroke:"black"})})))):null},$e=function(){var e=Object(i.c)(je),t=Object(i.c)(te),n=Object(i.c)(_e),a=Object(i.c)(xe);return c.a.createElement("div",{className:"Screen alert alert-secondary"},!!a&&c.a.createElement("div",{className:"Transaction d-flex justify-content-between bg-white rounded-top border-bottom border-secondary"},c.a.createElement("div",{className:"font-italic"},Object(Je.a)(n)),c.a.createElement("div",{className:"font-weight-bold"},G(a))),!t&&c.a.createElement("div",null,e),c.a.createElement(Ze,null),t&&c.a.createElement("div",{className:"text-muted"},t),t&&c.a.createElement("h3",{className:"text-right"},G(t)))},He=n(248),Qe=function(e){var t,n=e.action,a=e.color,o=void 0===a?"light":a,l=e.keyCodes,i=e.disabled,u=e.onClick,s=e.children;Object(We.a)(e,["action","color","keyCodes","disabled","onClick","children"]);return Object(r.useEffect)((function(){if(!i){var e=function(e){return!l.includes(e.code)||(e.preventDefault(),u(),!1)};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}}),[i,l,u]),c.a.createElement("button",{type:"button",className:Ye()("btn","text-".concat(o),{"btn-dark":n,"btn-outline-dark":!n}),disabled:i,onClick:u,title:"Shortcut keys: ".concat(l.join(", "))},n?Object(Je.a)((null===(t=n.payload)||void 0===t?void 0:t.description)||(null===n||void 0===n?void 0:n.type)||""):s)},et=(z={},Object(u.a)(z,s,(function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(T.a)(Object(T.a)({},e),{},{type:"@@action/".concat(s)})),n(he("Accepting payment...")),n(W()),le(a()).acceptPayment(e.payload.payment)}catch(ct){n(pe(ct))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(u.a)(z,d,(function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){var r,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(T.a)(Object(T.a)({},e),{},{type:"@@action/".concat(d)})),n(he("Accepting signature...")),n(W()),n(ye()),r=le(a()),(c=new R.a.remotepay.VerifySignatureRequest).setPayment(e.payload.payment),r.acceptSignature(c)}catch(ct){n(pe(ct))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(u.a)(z,m,De),Object(u.a)(z,p,(function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){var r,c,o;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(T.a)(Object(T.a)({},e),{},{type:"@@action/".concat(p)})),n(he("Identifying...")),n(W([{type:E,payload:{description:"OK"}},{type:m,payload:{description:"Cancel"}}])),r=a(),c=le(r),o=re(r),c.showMessage("".concat(o," connected"))}catch(ct){n(pe(ct))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(u.a)(z,v,(function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){var r,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(T.a)(Object(T.a)({},e),{},{type:"@@action/".concat(v)})),n(he("")),n(W()),r=le(a()),(c=new R.a.remotepay.InputOption).setDescription(e.payload.description),c.setKeyPress(e.payload.keyPress),r.invokeInputOption(c)}catch(ct){n(pe(ct))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(u.a)(z,f,(function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(T.a)(Object(T.a)({},e),{},{type:"@@action/".concat(f)})),n(he("Rejecting payment...")),n(W()),le(a()).rejectPayment(e.payload.payment,e.payload.challenges[0])}catch(ct){n(pe(ct))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(u.a)(z,y,(function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){var r,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(T.a)(Object(T.a)({},e),{},{type:"@@action/".concat(y)})),n(he("Rejecting signature...")),n(W()),n(ye()),r=le(a()),(c=new R.a.remotepay.VerifySignatureRequest).setPayment(e.payload.payment),r.rejectSignature(c)}catch(ct){n(pe(ct))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(u.a)(z,b,(function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(T.a)(Object(T.a)({},e),{},{type:"@@action/".concat(b)})),n(he("Resetting...")),n(W()),le(a()).resetDevice()}catch(ct){n(pe(ct))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(u.a)(z,E,(function(e){return function(){var t=Object(L.a)(V.a.mark((function t(n,a){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n(Object(T.a)(Object(T.a)({},e),{},{type:"@@action/".concat(E)})),n(he("Ready")),n(W([{type:p},{type:b},{type:O}])),le(a()).showWelcomeScreen()}catch(ct){n(pe(ct))}case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()})),Object(u.a)(z,O,Re),z),tt=function(){var e=Object(i.b)(),t=Object(i.c)(Q),n=Object(i.c)(H),a=Object(r.useState)(!1),o=Object(Pe.a)(a,2),l=o[0],u=o[1],s=Object(r.useMemo)((function(){return!n||l}),[n,l]),d=Object(r.useCallback)((function(t){return Object(L.a)(V.a.mark((function n(){return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u(!0),n.next=3,e(et[t.type](t));case 3:case"end":return n.stop()}}),n)})))}),[e,u]);Object(r.useEffect)((function(){t.length&&u(!1)}),[u,t]);var m=Object(He.a)(t),p=m[0],v=m[1],f=m.slice(2);return c.a.createElement("table",{className:"Keys"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"2"},c.a.createElement(Qe,{action:p,disabled:!p||l,keyCodes:["F1","NumpadDivide"],onClick:d(p)})),c.a.createElement("td",{colSpan:"2"},c.a.createElement(Qe,{action:v,disabled:!v||l,keyCodes:["F2","NumpadMultiply"],onClick:d(v),moreActions:f})))),c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad7","Digit7"],onClick:function(){return e(ee("7"))}},"7")),c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad8","Digit8"],onClick:function(){return e(ee("8"))}},"8")),c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad9","Digit9"],onClick:function(){return e(ee("9"))}},"9")),c.a.createElement("td",null,c.a.createElement(Qe,{color:"danger",disabled:s,keyCodes:["NumpadSubtract","Escape"],onClick:function(){return e({type:"BUFFER_RESET"})}},"X"))),c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad4","Digit4"],onClick:function(){return e(ee("4"))}},"4")),c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad5","Digit5"],onClick:function(){return e(ee("5"))}},"5")),c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad6","Digit6"],onClick:function(){return e(ee("6"))}},"6")),c.a.createElement("td",null,c.a.createElement(Qe,{color:"warning",disabled:s,keyCodes:["NumpadAdd","Backspace","Delete"],onClick:function(){return e({type:"BUFFER_UNDO"})}},"<"))),c.a.createElement("tr",null,c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad1","Digit1"],onClick:function(){return e(ee("1"))}},"1")),c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad2","Digit2"],onClick:function(){return e(ee("2"))}},"2")),c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad3","Digit3"],onClick:function(){return e(ee("3"))}},"3")),c.a.createElement("td",{rowSpan:"2"},c.a.createElement(Qe,{color:"success",disabled:s,keyCodes:["NumpadEnter","Enter"],onClick:function(){return e(Re())}},"O"))),c.a.createElement("tr",null,c.a.createElement("td",{colSpan:"2"},c.a.createElement(Qe,{disabled:s,keyCodes:["Numpad0","Digit0"],onClick:function(){return e(ee("0"))}},"0")),c.a.createElement("td",null,c.a.createElement(Qe,{disabled:s,keyCodes:["NumpadDecimal","Period"],onClick:function(){return e(ee("00"))}},"00")))))},nt=(n(553),function(){var e=Object(i.b)(),t=Object(i.c)(ze),n=Object(r.useCallback)((function(){return e(De())}),[e]);return t?c.a.createElement("div",{className:"Keypad card"},c.a.createElement("div",{className:"card-header"},c.a.createElement(Me,null),c.a.createElement("h3",null,"Virtual Keypad"),c.a.createElement("button",{className:"btn btn-sm btn-outline-dark",onClick:n,title:"Disconnect"},c.a.createElement(Ue,null))),c.a.createElement("div",{className:"card-body"},c.a.createElement($e,null),c.a.createElement(tt,null))):null}),at=(n(554),function(){var e=Object(i.b)(),t=Object(i.c)(fe),n=Object(r.useCallback)((function(){return e(function(e){return{type:"PAYMENT_SET",payload:e}}())}),[e]);return t.id?c.a.createElement("div",{className:"Payment alert alert-success"},c.a.createElement("button",{type:"button",className:"close",onClick:n},"\xd7"),c.a.createElement("h4",{className:"alert-heading"},"Payment Details"),c.a.createElement("table",{className:"table table-sm small mb-0"},c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Payment ID:"),c.a.createElement("td",null,t.id)),c.a.createElement("tr",null,c.a.createElement("th",null,"External ID:"),c.a.createElement("td",null,t.externalId)),c.a.createElement("tr",null,c.a.createElement("th",null,"Order ID:"),c.a.createElement("td",null,t.orderId)),!!t.tipAmount&&c.a.createElement("tr",null,c.a.createElement("th",null,"Total:"),c.a.createElement("td",null,G(t.amount+t.tipAmount))),c.a.createElement("tr",null,c.a.createElement("th",null,"Amount:"),c.a.createElement("td",null,G(t.amount))),!!t.tipAmount&&c.a.createElement("tr",null,c.a.createElement("th",null,"Tip:"),c.a.createElement("td",null,G(t.tipAmount))),c.a.createElement("tr",null,c.a.createElement("th",null,"Card:"),c.a.createElement("td",null,c.a.createElement("div",null,t.cardType),c.a.createElement("div",null,function(e){var t=e.first6,n=e.last4;return[t,"*".repeat(6),n].join("").replace(/.{4}/g," $&").trim()}(t.card)),t.card.name&&c.a.createElement("div",null,t.card.name)))))):null});n(555);var rt=function(){return c.a.createElement("div",{className:"App container"},c.a.createElement(Xe,null),c.a.createElement(Ve,null),c.a.createElement(Ke,null),c.a.createElement(at,null),c.a.createElement(nt,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:J},c.a.createElement(rt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[252,1,2]]]);
//# sourceMappingURL=main.55fe943a.chunk.js.map